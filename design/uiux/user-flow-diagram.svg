<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .flow-text { font-family: 'Pretendard', sans-serif; font-size: 12px; font-weight: 500; }
      .flow-title { font-family: 'Pretendard', sans-serif; font-size: 14px; font-weight: 600; }
      .flow-subtitle { font-family: 'Pretendard', sans-serif; font-size: 10px; font-weight: 400; fill: #64748B; }
      .primary-color { fill: #2E86AB; }
      .secondary-color { fill: #F18F01; }
      .success-color { fill: #10B981; }
      .gray-bg { fill: #F8FAFC; stroke: #E2E8F0; stroke-width: 1; }
      .white-bg { fill: white; stroke: #CBD5E1; stroke-width: 1; }
      .arrow { stroke: #64748B; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .main-arrow { stroke: #2E86AB; stroke-width: 3; fill: none; marker-end: url(#arrowhead-blue); }
      .branch-arrow { stroke: #F18F01; stroke-width: 2; fill: none; marker-end: url(#arrowhead-orange); stroke-dasharray: 5,5; }
    </style>
    
    <!-- Arrow markers -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748B" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2E86AB" />
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#F18F01" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="800" fill="#FEFEFE"/>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" class="flow-text" font-size="18px" font-weight="700">
    여행 일정 생성 서비스 - 사용자 Flow 다이어그램
  </text>
  
  <!-- Legend -->
  <g transform="translate(50, 60)">
    <rect x="0" y="0" width="300" height="80" class="gray-bg" rx="8"/>
    <text x="10" y="20" class="flow-title">범례</text>
    <line x1="10" y1="30" x2="40" y2="30" class="main-arrow"/>
    <text x="45" y="35" class="flow-text">주요 경로</text>
    <line x1="110" y1="30" x2="140" y2="30" class="branch-arrow"/>
    <text x="145" y="35" class="flow-text">선택적 경로</text>
    <line x1="10" y1="50" x2="40" y2="50" class="arrow"/>
    <text x="45" y="55" class="flow-text">일반 이동</text>
    <rect x="200" y="25" width="60" height="20" class="primary-color" rx="4"/>
    <text x="230" y="37" text-anchor="middle" class="flow-text" fill="white">핵심 화면</text>
    <rect x="200" y="50" width="60" height="20" class="white-bg" rx="4"/>
    <text x="230" y="62" text-anchor="middle" class="flow-text">지원 화면</text>
  </g>

  <!-- Flow Steps -->
  
  <!-- 1. Entry Point - Dashboard -->
  <g transform="translate(100, 180)">
    <rect x="0" y="0" width="140" height="60" class="primary-color" rx="8"/>
    <text x="70" y="20" text-anchor="middle" class="flow-text" fill="white">01. 대시보드</text>
    <text x="70" y="35" text-anchor="middle" class="flow-subtitle" fill="white">서비스 진입점</text>
    <text x="70" y="50" text-anchor="middle" class="flow-subtitle" fill="white">여행 프로젝트 관리</text>
  </g>

  <!-- 2. Profile Setup Flow -->
  <g transform="translate(320, 120)">
    <!-- Member Management -->
    <rect x="0" y="0" width="140" height="60" class="primary-color" rx="8"/>
    <text x="70" y="20" text-anchor="middle" class="flow-text" fill="white">02. 멤버관리</text>
    <text x="70" y="35" text-anchor="middle" class="flow-subtitle" fill="white">RQ-PROF-001</text>
    <text x="70" y="50" text-anchor="middle" class="flow-subtitle" fill="white">여행 멤버 등록</text>
    
    <!-- Travel Setting -->
    <rect x="0" y="80" width="140" height="60" class="primary-color" rx="8"/>
    <text x="70" y="100" text-anchor="middle" class="flow-text" fill="white">03. 여행일정설정</text>
    <text x="70" y="115" text-anchor="middle" class="flow-subtitle" fill="white">RQ-PROF-002</text>
    <text x="70" y="130" text-anchor="middle" class="flow-subtitle" fill="white">날짜/장소/숙소</text>
    
    <!-- Transportation -->
    <rect x="0" y="160" width="140" height="60" class="primary-color" rx="8"/>
    <text x="70" y="180" text-anchor="middle" class="flow-text" fill="white">04. 이동수단설정</text>
    <text x="70" y="195" text-anchor="middle" class="flow-subtitle" fill="white">RQ-PROF-003</text>
    <text x="70" y="210" text-anchor="middle" class="flow-subtitle" fill="white">교통 선호도</text>
  </g>

  <!-- 3. AI Generation Flow -->
  <g transform="translate(540, 180)">
    <!-- AI Generation Request -->
    <rect x="0" y="0" width="140" height="60" class="primary-color" rx="8"/>
    <text x="70" y="20" text-anchor="middle" class="flow-text" fill="white">05. AI일정생성</text>
    <text x="70" y="35" text-anchor="middle" class="flow-subtitle" fill="white">RQ-ITGEN-001</text>
    <text x="70" y="50" text-anchor="middle" class="flow-subtitle" fill="white">Claude API 호출</text>
    
    <!-- Generated Itinerary -->
    <rect x="180" y="0" width="140" height="60" class="primary-color" rx="8"/>
    <text x="250" y="20" text-anchor="middle" class="flow-text" fill="white">06. 생성된일정조회</text>
    <text x="250" y="35" text-anchor="middle" class="flow-subtitle" fill="white">시간대별 일정</text>
    <text x="250" y="50" text-anchor="middle" class="flow-subtitle" fill="white">편집 가능</text>
  </g>

  <!-- 4. Detail & Verification Flow -->
  <g transform="translate(760, 120)">
    <!-- Place Detail -->
    <rect x="0" y="0" width="140" height="60" class="white-bg" rx="8"/>
    <text x="70" y="20" text-anchor="middle" class="flow-text">07. 장소상세정보</text>
    <text x="70" y="35" text-anchor="middle" class="flow-subtitle">RQ-ITGEN-003</text>
    <text x="70" y="50" text-anchor="middle" class="flow-subtitle">장소 템플릿</text>
    
    <!-- Verification -->
    <rect x="0" y="80" width="140" height="60" class="secondary-color" rx="8"/>
    <text x="70" y="100" text-anchor="middle" class="flow-text" fill="white">08. 장소검증결과</text>
    <text x="70" y="115" text-anchor="middle" class="flow-subtitle" fill="white">RQ-ITGEN-002</text>
    <text x="70" y="130" text-anchor="middle" class="flow-subtitle" fill="white">실존 여부 확인</text>
    
    <!-- Review -->
    <rect x="0" y="160" width="140" height="60" class="white-bg" rx="8"/>
    <text x="70" y="180" text-anchor="middle" class="flow-text">12. 리뷰평점조회</text>
    <text x="70" y="195" text-anchor="middle" class="flow-subtitle">RQ-REV-001</text>
    <text x="70" y="210" text-anchor="middle" class="flow-subtitle">신뢰도 확인</text>
  </g>

  <!-- 5. Location & Map Services -->
  <g transform="translate(540, 300)">
    <!-- Location Search -->
    <rect x="0" y="0" width="140" height="60" class="white-bg" rx="8"/>
    <text x="70" y="20" text-anchor="middle" class="flow-text">09. 주변장소검색</text>
    <text x="70" y="35" text-anchor="middle" class="flow-subtitle">RQ-LOC-001</text>
    <text x="70" y="50" text-anchor="middle" class="flow-subtitle">위치 기반 검색</text>
    
    <!-- Route Check -->
    <rect x="180" y="0" width="140" height="60" class="white-bg" rx="8"/>
    <text x="250" y="20" text-anchor="middle" class="flow-text">10. 이동경로확인</text>
    <text x="250" y="35" text-anchor="middle" class="flow-subtitle">RQ-LOC-002</text>
    <text x="250" y="50" text-anchor="middle" class="flow-subtitle">교통 수단별 경로</text>
    
    <!-- Map Integration -->
    <rect x="360" y="0" width="140" height="60" class="secondary-color" rx="8"/>
    <text x="430" y="20" text-anchor="middle" class="flow-text" fill="white">11. 지도통합화면</text>
    <text x="430" y="35" text-anchor="middle" class="flow-subtitle" fill="white">RQ-MAP-001</text>
    <text x="430" y="50" text-anchor="middle" class="flow-subtitle" fill="white">카카오/구글맵</text>
  </g>

  <!-- Flow Arrows -->
  
  <!-- Main Flow: Dashboard -> Profile Setup -->
  <line x1="240" y1="210" x2="320" y2="210" class="main-arrow"/>
  
  <!-- Profile Setup Internal Flow -->
  <line x1="390" y1="180" x2="390" y2="200" class="main-arrow"/>
  <line x1="390" y1="220" x2="390" y2="240" class="main-arrow"/>
  
  <!-- Profile to AI Generation -->
  <line x1="460" y1="210" x2="540" y2="210" class="main-arrow"/>
  
  <!-- AI Generation Internal Flow -->
  <line x1="680" y1="210" x2="720" y2="210" class="main-arrow"/>
  
  <!-- AI Generation to Details -->
  <line x1="720" y1="210" x2="760" y2="180" class="branch-arrow"/>
  <line x1="760" y1="210" x2="760" y2="200" class="branch-arrow"/>
  <line x1="760" y1="210" x2="760" y2="220" class="branch-arrow"/>
  
  <!-- Details Internal Flow -->
  <line x1="830" y1="180" x2="830" y2="200" class="arrow"/>
  <line x1="830" y1="220" x2="830" y2="240" class="arrow"/>
  
  <!-- Back to Main Flow from Details -->
  <line x1="900" y1="200" x2="940" y2="200" class="arrow"/>
  <line x1="940" y1="200" x2="940" y2="330" class="arrow"/>
  <line x1="940" y1="330" x2="900" y2="330" class="arrow"/>
  
  <!-- Location Services Internal Flow -->
  <line x1="680" y1="330" x2="720" y2="330" class="arrow"/>
  <line x1="860" y1="330" x2="900" y2="330" class="arrow"/>
  
  <!-- Branch connections from main itinerary -->
  <line x1="790" y1="240" x2="790" y2="300" class="branch-arrow"/>
  <line x1="790" y1="300" x2="680" y2="300" class="branch-arrow"/>
  
  <!-- User Journey Steps -->
  <g transform="translate(100, 420)">
    <rect x="0" y="0" width="1000" height="320" class="gray-bg" rx="12"/>
    <text x="20" y="30" class="flow-title" font-size="16px">사용자 여정 단계별 설명</text>
    
    <!-- Step 1 -->
    <g transform="translate(20, 50)">
      <circle cx="15" cy="15" r="12" class="primary-color"/>
      <text x="15" y="20" text-anchor="middle" class="flow-text" fill="white" font-weight="700">1</text>
      <text x="40" y="15" class="flow-title">서비스 진입 및 프로젝트 생성</text>
      <text x="40" y="35" class="flow-text">• 대시보드에서 새 여행 계획 시작</text>
      <text x="40" y="50" class="flow-text">• 기존 여행 프로젝트 관리</text>
    </g>
    
    <!-- Step 2 -->
    <g transform="translate(20, 110)">
      <circle cx="15" cy="15" r="12" class="primary-color"/>
      <text x="15" y="20" text-anchor="middle" class="flow-text" fill="white" font-weight="700">2</text>
      <text x="40" y="15" class="flow-title">여행 프로파일 설정 (순차적)</text>
      <text x="40" y="35" class="flow-text">• 멤버 정보 등록 (이름, 나이, 건강상태, 선호도)</text>
      <text x="40" y="50" class="flow-text">• 여행 기본 정보 (날짜, 출발지, 도착지, 숙소)</text>
      <text x="40" y="65" class="flow-text">• 이동수단 선호도 설정</text>
    </g>
    
    <!-- Step 3 -->
    <g transform="translate(520, 50)">
      <circle cx="15" cy="15" r="12" class="secondary-color"/>
      <text x="15" y="20" text-anchor="middle" class="flow-text" fill="white" font-weight="700">3</text>
      <text x="40" y="15" class="flow-title">AI 기반 일정 생성</text>
      <text x="40" y="35" class="flow-text">• Claude API를 통한 맞춤형 일정 생성</text>
      <text x="40" y="50" class="flow-text">• 시간대별 상세 일정 표시</text>
    </g>
    
    <!-- Step 4 -->
    <g transform="translate(520, 110)">
      <circle cx="15" cy="15" r="12" class="success-color"/>
      <text x="15" y="20" text-anchor="middle" class="flow-text" fill="white" font-weight="700">4</text>
      <text x="40" y="15" class="flow-title">장소 정보 확인 및 검증 (선택적)</text>
      <text x="40" y="35" class="flow-text">• 추천 장소 상세 정보 조회</text>
      <text x="40" y="50" class="flow-text">• 장소 실존 여부 검증</text>
      <text x="40" y="65" class="flow-text">• 리뷰 및 평점 확인</text>
    </g>
    
    <!-- Step 5 -->
    <g transform="translate(20, 190)">
      <circle cx="15" cy="15" r="12" style="fill: #64748B;"/>
      <text x="15" y="20" text-anchor="middle" class="flow-text" fill="white" font-weight="700">5</text>
      <text x="40" y="15" class="flow-title">위치 서비스 활용 (필요시)</text>
      <text x="40" y="35" class="flow-text">• 주변 장소 추가 검색</text>
      <text x="40" y="50" class="flow-text">• 이동 경로 및 소요시간 확인</text>
      <text x="40" y="65" class="flow-text">• 통합 지도에서 전체 경로 시각화</text>
    </g>
    
    <!-- User Types -->
    <g transform="translate(520, 190)">
      <text x="0" y="15" class="flow-title">사용자 타입별 경로</text>
      <text x="0" y="35" class="flow-text">👥 계획형: 1→2→3→4→5 (모든 단계 활용)</text>
      <text x="0" y="50" class="flow-text">⚡ 간편형: 1→2→3 (핵심 기능만 사용)</text>
      <text x="0" y="65" class="flow-text">🔍 탐색형: 1→2→3→5 (장소 검색 중심)</text>
    </g>
    
    <!-- Service Integration -->
    <g transform="translate(20, 260)">
      <text x="0" y="15" class="flow-title">마이크로서비스 연동 포인트</text>
      <text x="0" y="35" class="flow-text">• PROF ↔ ITGEN: 프로파일 데이터 전달</text>
      <text x="0" y="50" class="flow-text">• ITGEN ↔ LOC/MAP: 장소 검증 및 위치 정보</text>
      <text x="350" y="35" class="flow-text">• LOC ↔ MAP: 지도 API 통합 호출</text>
      <text x="350" y="50" class="flow-text">• REV: 모든 장소 정보에 리뷰 데이터 결합</text>
    </g>
  </g>

  <!-- Service Layer Indicators -->
  <g transform="translate(50, 740)">
    <text x="0" y="15" class="flow-subtitle" font-size="10px">서비스별 색상 구분:</text>
    <rect x="0" y="20" width="15" height="15" class="primary-color" rx="2"/>
    <text x="20" y="32" class="flow-subtitle" font-size="10px">PROF/ITGEN (핵심)</text>
    
    <rect x="120" y="20" width="15" height="15" class="secondary-color" rx="2"/>
    <text x="140" y="32" class="flow-subtitle" font-size="10px">MAP (통합)</text>
    
    <rect x="220" y="20" width="15" height="15" class="white-bg" rx="2"/>
    <text x="240" y="32" class="flow-subtitle" font-size="10px">LOC/REV (지원)</text>
    
    <text x="350" y="32" class="flow-subtitle" font-size="10px">총 12개 화면, 17개 유저스토리 기반 설계</text>
  </g>
  
</svg>