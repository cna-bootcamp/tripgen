<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TripGen - ì§€ë„í†µí•©í™”ë©´</title>
  <link rel="stylesheet" href="assets/css/common.css">
  <style>
    /* ì§€ë„í†µí•©í™”ë©´ ì „ìš© ìŠ¤íƒ€ì¼ */
    .map-container {
      position: relative;
      height: 100vh;
      overflow: hidden;
    }

    /* í—¤ë” ì˜ì—­ */
    .map-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--gray-200);
      padding: var(--space-4);
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
    }

    .header-title {
      display: flex;
      align-items: center;
      gap: var(--space-3);
    }

    .back-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border: none;
      background: var(--gray-100);
      border-radius: 8px;
      color: var(--gray-700);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .back-btn:hover {
      background: var(--gray-200);
      color: var(--primary-blue);
    }

    .title-text {
      font-size: var(--text-xl);
      font-weight: var(--font-semibold);
      color: var(--gray-900);
    }

    .header-controls {
      display: flex;
      align-items: center;
      gap: var(--space-3);
    }

    /* ì§€ì—­ ìƒíƒœ í‘œì‹œ */
    .region-status {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      padding: var(--space-2) var(--space-4);
      background: var(--primary-blue-light);
      color: white;
      border-radius: 20px;
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
    }

    .region-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--success);
    }

    /* ì§€ë„ ë©”ì¸ ì˜ì—­ */
    .map-main {
      position: absolute;
      top: 80px;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--gray-100);
    }

    /* ì§€ë„ ì‹œë®¬ë ˆì´ì…˜ */
    .map-simulation {
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, #e8f4fd, #f0f9ff);
      position: relative;
      overflow: hidden;
    }

    /* ì§€ë„ ê²©ì ë°°ê²½ */
    .map-grid {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      opacity: 0.1;
      background-image: 
        linear-gradient(to right, var(--gray-400) 1px, transparent 1px),
        linear-gradient(to bottom, var(--gray-400) 1px, transparent 1px);
      background-size: 50px 50px;
    }

    /* ì§€ë„ ë§ˆì»¤ */
    .map-marker {
      position: absolute;
      width: 32px;
      height: 32px;
      cursor: pointer;
      transform: translate(-50%, -50%);
      transition: all 0.3s ease;
      z-index: 100;
    }

    .map-marker:hover {
      transform: translate(-50%, -50%) scale(1.2);
    }

    .marker-pin {
      width: 100%;
      height: 100%;
      border-radius: 50% 50% 50% 0;
      border: 3px solid white;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      position: relative;
    }

    .marker-hotel { background: var(--primary-blue); }
    .marker-tourist { background: var(--secondary-orange); }
    .marker-restaurant { background: var(--success); }
    .marker-shopping { background: var(--warning); }
    .marker-transport { background: var(--info); }

    .marker-icon {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -60%);
      font-size: 12px;
      color: white;
    }

    /* ê²½ë¡œ ë¼ì¸ */
    .route-line {
      position: absolute;
      background: var(--primary-blue);
      opacity: 0.7;
      z-index: 50;
    }

    .route-line.walking {
      height: 3px;
      background: repeating-linear-gradient(
        to right,
        var(--success) 0,
        var(--success) 5px,
        transparent 5px,
        transparent 10px
      );
    }

    .route-line.driving {
      height: 4px;
      background: var(--primary-blue);
    }

    .route-line.transit {
      height: 3px;
      background: repeating-linear-gradient(
        to right,
        var(--info) 0,
        var(--info) 8px,
        transparent 8px,
        transparent 16px
      );
    }

    /* ë ˆì´ì–´ ì»¨íŠ¸ë¡¤ */
    .layer-controls {
      position: absolute;
      top: 100px;
      right: var(--space-4);
      z-index: 200;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      padding: var(--space-4);
      min-width: 180px;
    }

    .layer-title {
      font-size: var(--text-sm);
      font-weight: var(--font-semibold);
      color: var(--gray-700);
      margin-bottom: var(--space-3);
    }

    .layer-option {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      padding: var(--space-2) 0;
      cursor: pointer;
    }

    .layer-option input[type="checkbox"] {
      width: 16px;
      height: 16px;
      accent-color: var(--primary-blue);
    }

    .layer-option label {
      font-size: var(--text-sm);
      color: var(--gray-700);
      cursor: pointer;
      flex: 1;
    }

    .layer-count {
      font-size: var(--text-xs);
      color: var(--gray-500);
      background: var(--gray-100);
      padding: 2px 6px;
      border-radius: 10px;
    }

    /* ì§€ë„ ì»¨íŠ¸ë¡¤ */
    .map-controls {
      position: absolute;
      bottom: var(--space-4);
      right: var(--space-4);
      z-index: 200;
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
    }

    .control-btn {
      width: 48px;
      height: 48px;
      background: white;
      border: none;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 18px;
      color: var(--gray-700);
    }

    .control-btn:hover {
      background: var(--gray-50);
      color: var(--primary-blue);
      transform: translateY(-1px);
    }

    /* ì¥ì†Œ ì •ë³´ íŒ¨ë„ */
    .place-panel {
      position: absolute;
      bottom: var(--space-4);
      left: var(--space-4);
      z-index: 200;
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
      max-width: 350px;
      min-width: 300px;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
      pointer-events: none;
    }

    .place-panel.active {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    .place-header {
      padding: var(--space-4);
      border-bottom: 1px solid var(--gray-200);
    }

    .place-category {
      display: inline-block;
      padding: 4px 8px;
      background: var(--secondary-orange);
      color: white;
      border-radius: 12px;
      font-size: var(--text-xs);
      font-weight: var(--font-medium);
      margin-bottom: var(--space-2);
    }

    .place-name {
      font-size: var(--text-lg);
      font-weight: var(--font-semibold);
      color: var(--gray-900);
      margin-bottom: var(--space-1);
    }

    .place-rating {
      display: flex;
      align-items: center;
      gap: var(--space-2);
    }

    .stars {
      color: var(--secondary-yellow);
      font-size: var(--text-sm);
    }

    .rating-text {
      font-size: var(--text-sm);
      color: var(--gray-600);
    }

    .place-content {
      padding: var(--space-4);
    }

    .place-info {
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
      margin-bottom: var(--space-4);
    }

    .info-item {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      font-size: var(--text-sm);
      color: var(--gray-600);
    }

    .info-icon {
      width: 16px;
      text-align: center;
      color: var(--primary-blue);
    }

    .place-actions {
      display: flex;
      gap: var(--space-2);
    }

    .action-btn {
      flex: 1;
      padding: var(--space-2) var(--space-3);
      border: 1px solid var(--gray-300);
      background: white;
      border-radius: 6px;
      font-size: var(--text-sm);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .action-btn.primary {
      background: var(--primary-blue);
      color: white;
      border-color: var(--primary-blue);
    }

    .action-btn:hover {
      background: var(--gray-50);
    }

    .action-btn.primary:hover {
      background: var(--primary-blue-dark);
    }

    /* ê²½ë¡œ ì •ë³´ íŒ¨ë„ */
    .route-panel {
      position: absolute;
      top: 100px;
      left: var(--space-4);
      z-index: 200;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      width: 280px;
      max-height: 400px;
      overflow-y: auto;
    }

    .route-header {
      padding: var(--space-4);
      border-bottom: 1px solid var(--gray-200);
      position: sticky;
      top: 0;
      background: white;
      border-radius: 12px 12px 0 0;
    }

    .route-title {
      font-size: var(--text-base);
      font-weight: var(--font-semibold);
      color: var(--gray-900);
      margin-bottom: var(--space-2);
    }

    .route-summary {
      display: flex;
      justify-content: space-between;
      font-size: var(--text-sm);
      color: var(--gray-600);
    }

    .route-list {
      padding: var(--space-2);
    }

    .route-item {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-3);
      border-radius: 8px;
      margin-bottom: var(--space-2);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .route-item:hover {
      background: var(--gray-50);
    }

    .route-item.active {
      background: var(--primary-blue);
      color: white;
    }

    .route-number {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--gray-200);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: var(--text-xs);
      font-weight: var(--font-semibold);
      color: var(--gray-700);
    }

    .route-item.active .route-number {
      background: white;
      color: var(--primary-blue);
    }

    .route-details h4 {
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
      margin-bottom: 2px;
    }

    .route-details p {
      font-size: var(--text-xs);
      color: var(--gray-500);
    }

    .route-item.active .route-details p {
      color: rgba(255, 255, 255, 0.8);
    }

    /* ëª¨ë°”ì¼ ëŒ€ì‘ */
    @media (max-width: 768px) {
      .layer-controls {
        right: var(--space-2);
        top: 90px;
        min-width: 160px;
      }

      .place-panel {
        left: var(--space-2);
        right: var(--space-2);
        max-width: none;
        min-width: auto;
      }

      .route-panel {
        left: var(--space-2);
        right: var(--space-2);
        width: auto;
        max-height: 300px;
      }

      .map-controls {
        bottom: var(--space-2);
        right: var(--space-2);
      }

      .header-content {
        padding: 0 var(--space-2);
      }

      .header-controls {
        gap: var(--space-2);
      }

      .region-status {
        padding: var(--space-1) var(--space-3);
        font-size: var(--text-xs);
      }
    }

    /* ì• ë‹ˆë©”ì´ì…˜ */
    @keyframes markerPulse {
      0% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.1); }
      100% { transform: translate(-50%, -50%) scale(1); }
    }

    .marker-active {
      animation: markerPulse 1.5s infinite;
    }

    @keyframes routeFlow {
      0% { background-position: 0 0; }
      100% { background-position: 20px 0; }
    }

    .route-line.animated {
      animation: routeFlow 2s linear infinite;
    }
  </style>
</head>
<body>
  <div class="map-container">
    <!-- í—¤ë” -->
    <header class="map-header">
      <div class="header-content">
        <div class="header-title">
          <button class="back-btn" onclick="goBack()">
            <span>â†</span>
          </button>
          <h1 class="title-text">ì—¬í–‰ ì§€ë„</h1>
        </div>
        <div class="header-controls">
          <div class="region-status">
            <div class="region-indicator"></div>
            <span id="regionStatus">êµ­ë‚´ (ì¹´ì¹´ì˜¤ë§µ)</span>
          </div>
        </div>
      </div>
    </header>

    <!-- ì§€ë„ ë©”ì¸ -->
    <main class="map-main">
      <!-- ì§€ë„ ì‹œë®¬ë ˆì´ì…˜ -->
      <div class="map-simulation">
        <div class="map-grid"></div>
        
        <!-- ì§€ë„ ë§ˆì»¤ë“¤ -->
        <div class="map-marker" style="top: 30%; left: 25%;" data-place="ìˆ™ì†Œ">
          <div class="marker-pin marker-hotel">
            <span class="marker-icon">ğŸ¨</span>
          </div>
        </div>
        
        <div class="map-marker" style="top: 45%; left: 40%;" data-place="ê´€ê´‘ì§€1">
          <div class="marker-pin marker-tourist">
            <span class="marker-icon">ğŸ›ï¸</span>
          </div>
        </div>
        
        <div class="map-marker" style="top: 35%; left: 60%;" data-place="ìŒì‹ì 1">
          <div class="marker-pin marker-restaurant">
            <span class="marker-icon">ğŸ½ï¸</span>
          </div>
        </div>
        
        <div class="map-marker" style="top: 55%; left: 30%;" data-place="ì‡¼í•‘ëª°">
          <div class="marker-pin marker-shopping">
            <span class="marker-icon">ğŸ›ï¸</span>
          </div>
        </div>
        
        <div class="map-marker" style="top: 65%; left: 70%;" data-place="ê´€ê´‘ì§€2">
          <div class="marker-pin marker-tourist">
            <span class="marker-icon">ğŸ¯</span>
          </div>
        </div>
        
        <div class="map-marker" style="top: 40%; left: 80%;" data-place="ìŒì‹ì 2">
          <div class="marker-pin marker-restaurant">
            <span class="marker-icon">ğŸœ</span>
          </div>
        </div>

        <!-- ê²½ë¡œ ë¼ì¸ë“¤ -->
        <div class="route-line driving" style="top: 30%; left: 25%; width: 15%; height: 4px; transform: rotate(15deg);"></div>
        <div class="route-line walking" style="top: 45%; left: 40%; width: 20%; height: 3px; transform: rotate(-5deg);"></div>
        <div class="route-line transit" style="top: 55%; left: 30%; width: 25%; height: 3px; transform: rotate(45deg);"></div>
        <div class="route-line driving" style="top: 65%; left: 70%; width: 10%; height: 4px; transform: rotate(-30deg);"></div>
      </div>
    </main>

    <!-- ë ˆì´ì–´ ì»¨íŠ¸ë¡¤ -->
    <div class="layer-controls">
      <div class="layer-title">ì§€ë„ ë ˆì´ì–´</div>
      
      <div class="layer-option">
        <input type="checkbox" id="layer-hotel" checked>
        <label for="layer-hotel">ìˆ™ì†Œ</label>
        <span class="layer-count">1</span>
      </div>
      
      <div class="layer-option">
        <input type="checkbox" id="layer-tourist" checked>
        <label for="layer-tourist">ê´€ê´‘ì§€</label>
        <span class="layer-count">2</span>
      </div>
      
      <div class="layer-option">
        <input type="checkbox" id="layer-restaurant" checked>
        <label for="layer-restaurant">ìŒì‹ì </label>
        <span class="layer-count">2</span>
      </div>
      
      <div class="layer-option">
        <input type="checkbox" id="layer-shopping" checked>
        <label for="layer-shopping">ì‡¼í•‘</label>
        <span class="layer-count">1</span>
      </div>
      
      <div class="layer-option">
        <input type="checkbox" id="layer-transport">
        <label for="layer-transport">êµí†µì •ë³´</label>
        <span class="layer-count">-</span>
      </div>
      
      <div class="layer-option">
        <input type="checkbox" id="layer-satellite">
        <label for="layer-satellite">ìœ„ì„±ë·°</label>
        <span class="layer-count">-</span>
      </div>
    </div>

    <!-- ì§€ë„ ì»¨íŠ¸ë¡¤ -->
    <div class="map-controls">
      <button class="control-btn" onclick="zoomIn()">+</button>
      <button class="control-btn" onclick="zoomOut()">-</button>
      <button class="control-btn" onclick="centerMap()">ğŸ“</button>
      <button class="control-btn" onclick="toggleFullscreen()">â›¶</button>
    </div>

    <!-- ê²½ë¡œ ì •ë³´ íŒ¨ë„ -->
    <div class="route-panel">
      <div class="route-header">
        <div class="route-title">ì˜¤ëŠ˜ì˜ ì—¬í–‰ ê²½ë¡œ</div>
        <div class="route-summary">
          <span>ì´ 6ê°œ ì¥ì†Œ</span>
          <span>ì˜ˆìƒ 5ì‹œê°„ 30ë¶„</span>
        </div>
      </div>
      
      <div class="route-list">
        <div class="route-item active" data-place="ìˆ™ì†Œ">
          <div class="route-number">1</div>
          <div class="route-details">
            <h4>í˜¸í…” ì‹ ë¼</h4>
            <p>09:00 ì¶œë°œ â€¢ ìˆ™ì†Œ</p>
          </div>
        </div>
        
        <div class="route-item" data-place="ê´€ê´‘ì§€1">
          <div class="route-number">2</div>
          <div class="route-details">
            <h4>ê²½ë³µê¶</h4>
            <p>09:30-11:00 â€¢ ê´€ê´‘ì§€</p>
          </div>
        </div>
        
        <div class="route-item" data-place="ìŒì‹ì 1">
          <div class="route-number">3</div>
          <div class="route-details">
            <h4>ë¶ì´Œí•œì˜¥ë§ˆì„ ë§›ì§‘</h4>
            <p>11:30-12:30 â€¢ ì ì‹¬ì‹ì‚¬</p>
          </div>
        </div>
        
        <div class="route-item" data-place="ì‡¼í•‘ëª°">
          <div class="route-number">4</div>
          <div class="route-details">
            <h4>ëª…ë™ ì‡¼í•‘ê±°ë¦¬</h4>
            <p>13:00-15:00 â€¢ ì‡¼í•‘</p>
          </div>
        </div>
        
        <div class="route-item" data-place="ê´€ê´‘ì§€2">
          <div class="route-number">5</div>
          <div class="route-details">
            <h4>ë‚¨ì‚°íƒ€ì›Œ</h4>
            <p>15:30-17:00 â€¢ ê´€ê´‘ì§€</p>
          </div>
        </div>
        
        <div class="route-item" data-place="ìŒì‹ì 2">
          <div class="route-number">6</div>
          <div class="route-details">
            <h4>í•œê°• ì¹˜í‚¨ì§‘</h4>
            <p>18:00-19:30 â€¢ ì €ë…ì‹ì‚¬</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ì¥ì†Œ ì •ë³´ íŒ¨ë„ -->
    <div class="place-panel" id="placePanel">
      <div class="place-header">
        <div class="place-category">ê´€ê´‘ì§€</div>
        <h3 class="place-name">ê²½ë³µê¶</h3>
        <div class="place-rating">
          <span class="stars">â˜…â˜…â˜…â˜…â˜†</span>
          <span class="rating-text">4.3 (2,847ëª…)</span>
        </div>
      </div>
      
      <div class="place-content">
        <div class="place-info">
          <div class="info-item">
            <span class="info-icon">ğŸ“</span>
            <span>ì„œìš¸ ì¢…ë¡œêµ¬ ì‚¬ì§ë¡œ 161</span>
          </div>
          <div class="info-item">
            <span class="info-icon">ğŸ“</span>
            <span>02-3700-3900</span>
          </div>
          <div class="info-item">
            <span class="info-icon">ğŸ•’</span>
            <span>09:00-18:00 (í˜„ì¬ ì˜ì—…ì¤‘)</span>
          </div>
          <div class="info-item">
            <span class="info-icon">ğŸš—</span>
            <span>ì£¼ì°¨ ê°€ëŠ¥ (ìœ ë£Œ)</span>
          </div>
          <div class="info-item">
            <span class="info-icon">ğŸš¶</span>
            <span>í˜„ì¬ ìœ„ì¹˜ì—ì„œ ë„ë³´ 15ë¶„</span>
          </div>
        </div>
        
        <div class="place-actions">
          <button class="action-btn">ë¦¬ë·° ë³´ê¸°</button>
          <button class="action-btn">ê¸¸ì°¾ê¸°</button>
          <button class="action-btn primary">ì¼ì • ì¶”ê°€</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
  <nav class="bottom-nav" style="position: fixed; bottom: 0; left: 0; right: 0; background: white; border-top: 1px solid var(--gray-200); padding: var(--space-2); z-index: 1000;">
    <div style="display: flex; justify-content: space-between; max-width: 1200px; margin: 0 auto;">
      <button onclick="navigateTo('10-ì´ë™ê²½ë¡œí™•ì¸.html')" style="padding: var(--space-2) var(--space-4); background: var(--gray-100); border: none; border-radius: 6px; cursor: pointer;">â† ì´ì „</button>
      <button onclick="navigateTo('12-ë¦¬ë·°í‰ì ì¡°íšŒ.html')" style="padding: var(--space-2) var(--space-4); background: var(--primary-blue); color: white; border: none; border-radius: 6px; cursor: pointer;">ë‹¤ìŒ â†’</button>
    </div>
  </nav>

  <script src="assets/js/common.js"></script>
  <script>
    // ì§€ë„í†µí•©í™”ë©´ ì „ìš© JavaScript
    
    // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', function() {
      initMapIntegration();
      initMarkerInteractions();
      initLayerControls();
      initRoutePanel();
      initRegionDetection();
    });

    /**
     * ì§€ë„ í†µí•© ê¸°ëŠ¥ ì´ˆê¸°í™”
     */
    function initMapIntegration() {
      // ì§€ì—­ë³„ API ì„¤ì • ì‹œë®¬ë ˆì´ì…˜
      const regions = {
        'domestic': {
          name: 'êµ­ë‚´ (ì¹´ì¹´ì˜¤ë§µ)',
          api: 'kakao',
          indicator: 'var(--success)'
        },
        'international': {
          name: 'í•´ì™¸ (êµ¬ê¸€ë§µ)',
          api: 'google',
          indicator: 'var(--info)'
        }
      };

      // í˜„ì¬ ì§€ì—­ ì„¤ì • (ì‹œë®¬ë ˆì´ì…˜)
      const currentRegion = 'domestic';
      updateRegionStatus(regions[currentRegion]);
    }

    /**
     * ì§€ì—­ ìƒíƒœ ì—…ë°ì´íŠ¸
     */
    function updateRegionStatus(region) {
      const statusElement = document.getElementById('regionStatus');
      const indicator = document.querySelector('.region-indicator');
      
      if (statusElement) {
        statusElement.textContent = region.name;
      }
      
      if (indicator) {
        indicator.style.background = region.indicator;
      }
    }

    /**
     * ë§ˆì»¤ ìƒí˜¸ì‘ìš© ì´ˆê¸°í™”
     */
    function initMarkerInteractions() {
      const markers = document.querySelectorAll('.map-marker');
      const placePanel = document.getElementById('placePanel');
      
      // ì¥ì†Œ ë°ì´í„° (ì‹œë®¬ë ˆì´ì…˜)
      const placeData = {
        'ìˆ™ì†Œ': {
          category: 'ìˆ™ì†Œ',
          name: 'í˜¸í…” ì‹ ë¼',
          rating: '4.5',
          reviews: '1,234',
          address: 'ì„œìš¸ ì¤‘êµ¬ ë™í˜¸ë¡œ 249',
          phone: '02-2233-3131',
          hours: '24ì‹œê°„ ìš´ì˜',
          parking: 'ì£¼ì°¨ ê°€ëŠ¥ (ë¬´ë£Œ)',
          distance: 'í˜„ì¬ ìœ„ì¹˜'
        },
        'ê´€ê´‘ì§€1': {
          category: 'ê´€ê´‘ì§€',
          name: 'ê²½ë³µê¶',
          rating: '4.3',
          reviews: '2,847',
          address: 'ì„œìš¸ ì¢…ë¡œêµ¬ ì‚¬ì§ë¡œ 161',
          phone: '02-3700-3900',
          hours: '09:00-18:00 (í˜„ì¬ ì˜ì—…ì¤‘)',
          parking: 'ì£¼ì°¨ ê°€ëŠ¥ (ìœ ë£Œ)',
          distance: 'ìˆ™ì†Œì—ì„œ ë„ë³´ 15ë¶„'
        },
        'ìŒì‹ì 1': {
          category: 'ìŒì‹ì ',
          name: 'ë¶ì´Œí•œì˜¥ë§ˆì„ ë§›ì§‘',
          rating: '4.1',
          reviews: '567',
          address: 'ì„œìš¸ ì¢…ë¡œêµ¬ ê³„ë™ê¸¸ 37',
          phone: '02-742-1234',
          hours: '11:00-21:00 (í˜„ì¬ ì˜ì—…ì¤‘)',
          parking: 'ì£¼ì°¨ ì–´ë ¤ì›€',
          distance: 'ê²½ë³µê¶ì—ì„œ ë„ë³´ 8ë¶„'
        },
        'ì‡¼í•‘ëª°': {
          category: 'ì‡¼í•‘',
          name: 'ëª…ë™ ì‡¼í•‘ê±°ë¦¬',
          rating: '4.0',
          reviews: '3,456',
          address: 'ì„œìš¸ ì¤‘êµ¬ ëª…ë™ê¸¸ ì¼ëŒ€',
          phone: '-',
          hours: '10:00-22:00 (ë§¤ì¥ë³„ ìƒì´)',
          parking: 'ì§€í•˜ ê³µì˜ì£¼ì°¨ì¥ ì´ìš©',
          distance: 'ìŒì‹ì ì—ì„œ ì§€í•˜ì²  20ë¶„'
        },
        'ê´€ê´‘ì§€2': {
          category: 'ê´€ê´‘ì§€',
          name: 'ë‚¨ì‚°íƒ€ì›Œ',
          rating: '4.2',
          reviews: '4,321',
          address: 'ì„œìš¸ ìš©ì‚°êµ¬ ë‚¨ì‚°ê³µì›ê¸¸ 105',
          phone: '02-3455-9277',
          hours: '10:00-23:00 (í˜„ì¬ ì˜ì—…ì¤‘)',
          parking: 'ì£¼ì°¨ ê°€ëŠ¥ (ìœ ë£Œ)',
          distance: 'ëª…ë™ì—ì„œ ì¼€ì´ë¸”ì¹´ 10ë¶„'
        },
        'ìŒì‹ì 2': {
          category: 'ìŒì‹ì ',
          name: 'í•œê°• ì¹˜í‚¨ì§‘',
          rating: '4.4',
          reviews: '890',
          address: 'ì„œìš¸ ì˜ë“±í¬êµ¬ ì—¬ì˜ë„ë™ í•œê°•ê³µì›',
          phone: '02-780-1234',
          hours: '16:00-24:00 (í˜„ì¬ ì˜ì—…ì¤‘)',
          parking: 'í•œê°•ê³µì› ì£¼ì°¨ì¥ ì´ìš©',
          distance: 'ë‚¨ì‚°íƒ€ì›Œì—ì„œ ì°¨ëŸ‰ 25ë¶„'
        }
      };

      markers.forEach(marker => {
        marker.addEventListener('click', function() {
          const place = this.dataset.place;
          const data = placeData[place];
          
          if (data && placePanel) {
            updatePlacePanel(data);
            showPlacePanel();
            
            // í™œì„± ë§ˆì»¤ í‘œì‹œ
            markers.forEach(m => m.classList.remove('marker-active'));
            this.classList.add('marker-active');
          }
        });

        // í˜¸ë²„ íš¨ê³¼
        marker.addEventListener('mouseenter', function() {
          this.style.zIndex = '101';
        });

        marker.addEventListener('mouseleave', function() {
          this.style.zIndex = '100';
        });
      });

      // ì§€ë„ í´ë¦­ ì‹œ íŒ¨ë„ ìˆ¨ê¸°ê¸°
      document.querySelector('.map-simulation').addEventListener('click', function(e) {
        if (!e.target.closest('.map-marker')) {
          hidePlacePanel();
          markers.forEach(m => m.classList.remove('marker-active'));
        }
      });
    }

    /**
     * ì¥ì†Œ íŒ¨ë„ ì—…ë°ì´íŠ¸
     */
    function updatePlacePanel(data) {
      const panel = document.getElementById('placePanel');
      if (!panel) return;

      // ì¹´í…Œê³ ë¦¬ë³„ ìƒ‰ìƒ ì„¤ì •
      const categoryColors = {
        'ìˆ™ì†Œ': 'var(--primary-blue)',
        'ê´€ê´‘ì§€': 'var(--secondary-orange)',
        'ìŒì‹ì ': 'var(--success)',
        'ì‡¼í•‘': 'var(--warning)'
      };

      panel.querySelector('.place-category').textContent = data.category;
      panel.querySelector('.place-category').style.background = categoryColors[data.category] || 'var(--gray-500)';
      panel.querySelector('.place-name').textContent = data.name;
      panel.querySelector('.rating-text').textContent = `${data.rating} (${data.reviews}ëª…)`;
      
      // ì •ë³´ ì—…ë°ì´íŠ¸
      const infoItems = panel.querySelectorAll('.info-item span:last-child');
      infoItems[0].textContent = data.address;
      infoItems[1].textContent = data.phone;
      infoItems[2].textContent = data.hours;
      infoItems[3].textContent = data.parking;
      infoItems[4].textContent = data.distance;
    }

    /**
     * ì¥ì†Œ íŒ¨ë„ í‘œì‹œ
     */
    function showPlacePanel() {
      const panel = document.getElementById('placePanel');
      if (panel) {
        panel.classList.add('active');
      }
    }

    /**
     * ì¥ì†Œ íŒ¨ë„ ìˆ¨ê¸°ê¸°
     */
    function hidePlacePanel() {
      const panel = document.getElementById('placePanel');
      if (panel) {
        panel.classList.remove('active');
      }
    }

    /**
     * ë ˆì´ì–´ ì»¨íŠ¸ë¡¤ ì´ˆê¸°í™”
     */
    function initLayerControls() {
      const layerCheckboxes = document.querySelectorAll('.layer-controls input[type="checkbox"]');
      
      layerCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
          const layerType = this.id.replace('layer-', '');
          toggleLayer(layerType, this.checked);
        });
      });
    }

    /**
     * ë ˆì´ì–´ í† ê¸€
     */
    function toggleLayer(layerType, visible) {
      const layerMap = {
        'hotel': '.marker-hotel',
        'tourist': '.marker-tourist',
        'restaurant': '.marker-restaurant',
        'shopping': '.marker-shopping',
        'transport': '.route-line',
        'satellite': '.map-simulation'
      };

      const selector = layerMap[layerType];
      if (!selector) return;

      const elements = document.querySelectorAll(selector);
      elements.forEach(element => {
        if (layerType === 'satellite') {
          // ìœ„ì„±ë·° í† ê¸€
          element.style.filter = visible ? 'sepia(0.3) contrast(1.2)' : 'none';
        } else {
          // ë§ˆì»¤/ê²½ë¡œ í‘œì‹œ/ìˆ¨ê¹€
          element.style.display = visible ? 'block' : 'none';
        }
      });

      // êµí†µì •ë³´ ë ˆì´ì–´
      if (layerType === 'transport') {
        const routeLines = document.querySelectorAll('.route-line');
        routeLines.forEach(line => {
          if (visible) {
            line.classList.add('animated');
          } else {
            line.classList.remove('animated');
          }
        });
      }
    }

    /**
     * ê²½ë¡œ íŒ¨ë„ ì´ˆê¸°í™”
     */
    function initRoutePanel() {
      const routeItems = document.querySelectorAll('.route-item');
      const markers = document.querySelectorAll('.map-marker');
      
      routeItems.forEach(item => {
        item.addEventListener('click', function() {
          const place = this.dataset.place;
          
          // í™œì„± ê²½ë¡œ í•­ëª© ë³€ê²½
          routeItems.forEach(r => r.classList.remove('active'));
          this.classList.add('active');
          
          // í•´ë‹¹ ë§ˆì»¤ ê°•ì¡°
          markers.forEach(marker => {
            marker.classList.remove('marker-active');
            if (marker.dataset.place === place) {
              marker.classList.add('marker-active');
              marker.click(); // ë§ˆì»¤ í´ë¦­ ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±°
            }
          });
        });
      });
    }

    /**
     * ì§€ì—­ ê°ì§€ ì´ˆê¸°í™”
     */
    function initRegionDetection() {
      // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” GPS ë˜ëŠ” IP ê¸°ë°˜ ìœ„ì¹˜ ê°ì§€
      // ì—¬ê¸°ì„œëŠ” ì‹œë®¬ë ˆì´ì…˜
      
      // ìœ„ì¹˜ ë³€ê²½ ì‹œë®¬ë ˆì´ì…˜ (í…ŒìŠ¤íŠ¸ìš©)
      let isInternational = false;
      
      // ë”ë¸” í´ë¦­ìœ¼ë¡œ ì§€ì—­ ì „í™˜ (ë°ëª¨ìš©)
      document.querySelector('.map-simulation').addEventListener('dblclick', function() {
        isInternational = !isInternational;
        
        const region = isInternational ? {
          name: 'í•´ì™¸ (êµ¬ê¸€ë§µ)',
          api: 'google',
          indicator: 'var(--info)'
        } : {
          name: 'êµ­ë‚´ (ì¹´ì¹´ì˜¤ë§µ)',
          api: 'kakao',
          indicator: 'var(--success)'
        };
        
        updateRegionStatus(region);
        showToast(`${region.name}ìœ¼ë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤.`);
      });
    }

    /**
     * ì§€ë„ ì»¨íŠ¸ë¡¤ í•¨ìˆ˜ë“¤
     */
    function zoomIn() {
      const mapElement = document.querySelector('.map-simulation');
      const currentScale = parseFloat(mapElement.style.transform?.match(/scale\(([^)]+)\)/)?.[1] || 1);
      const newScale = Math.min(currentScale * 1.2, 3);
      mapElement.style.transform = `scale(${newScale})`;
      mapElement.style.transformOrigin = 'center center';
      showToast('í™•ëŒ€ë˜ì—ˆìŠµë‹ˆë‹¤');
    }

    function zoomOut() {
      const mapElement = document.querySelector('.map-simulation');
      const currentScale = parseFloat(mapElement.style.transform?.match(/scale\(([^)]+)\)/)?.[1] || 1);
      const newScale = Math.max(currentScale / 1.2, 0.5);
      mapElement.style.transform = `scale(${newScale})`;
      mapElement.style.transformOrigin = 'center center';
      showToast('ì¶•ì†Œë˜ì—ˆìŠµë‹ˆë‹¤');
    }

    function centerMap() {
      const mapElement = document.querySelector('.map-simulation');
      mapElement.style.transform = 'scale(1)';
      showToast('ì§€ë„ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤');
    }

    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
        showToast('ì „ì²´í™”ë©´ ëª¨ë“œ');
      } else {
        document.exitFullscreen();
        showToast('ì „ì²´í™”ë©´ í•´ì œ');
      }
    }

    /**
     * ë„¤ë¹„ê²Œì´ì…˜ í•¨ìˆ˜
     */
    function goBack() {
      navigateTo('10-ì´ë™ê²½ë¡œí™•ì¸.html');
    }

    function navigateTo(page) {
      // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ë¼ìš°í„° ì‚¬ìš©
      window.location.href = page;
    }

    /**
     * í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ
     */
    function showToast(message) {
      // í† ìŠ¤íŠ¸ ìš”ì†Œê°€ ì—†ìœ¼ë©´ ìƒì„±
      let toast = document.getElementById('toast');
      if (!toast) {
        toast = document.createElement('div');
        toast.id = 'toast';
        toast.style.cssText = `
          position: fixed;
          top: 100px;
          left: 50%;
          transform: translateX(-50%);
          background: rgba(0, 0, 0, 0.8);
          color: white;
          padding: 12px 20px;
          border-radius: 20px;
          font-size: 14px;
          z-index: 9999;
          opacity: 0;
          transition: all 0.3s ease;
          pointer-events: none;
        `;
        document.body.appendChild(toast);
      }

      toast.textContent = message;
      toast.style.opacity = '1';

      setTimeout(() => {
        toast.style.opacity = '0';
      }, 2000);
    }

    // API í´ë°± ì²˜ë¦¬ ì‹œë®¬ë ˆì´ì…˜
    function handleAPIFailure(apiType) {
      const fallbackMessage = apiType === 'kakao' 
        ? 'ì¹´ì¹´ì˜¤ë§µ ì—°ê²° ì‹¤íŒ¨. êµ¬ê¸€ë§µìœ¼ë¡œ ì „í™˜í•©ë‹ˆë‹¤.'
        : 'êµ¬ê¸€ë§µ ì—°ê²° ì‹¤íŒ¨. ì¹´ì¹´ì˜¤ë§µìœ¼ë¡œ ì „í™˜í•©ë‹ˆë‹¤.';
      
      showToast(fallbackMessage);
      
      // ì‹¤ì œë¡œëŠ” ë‹¤ë¥¸ APIë¡œ ì „í™˜
      setTimeout(() => {
        showToast('ë°±ì—… ì§€ë„ ì„œë¹„ìŠ¤ê°€ ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.');
      }, 1500);
    }

    // ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§ ì‹œë®¬ë ˆì´ì…˜
    function monitorAPIUsage() {
      // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” API í˜¸ì¶œ íšŸìˆ˜ ì¶”ì 
      console.log('API ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§ ì¤‘...');
    }

    // ì´ˆê¸° ì„¤ì •
    monitorAPIUsage();
  </script>
</body>
</html>