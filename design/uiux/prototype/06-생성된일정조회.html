<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ìƒì„±ëœì¼ì •ì¡°íšŒ - TripGen</title>
  <link rel="stylesheet" href="assets/css/common.css">
  <style>
    /* ìƒì„±ëœ ì¼ì • ì¡°íšŒ íŠ¹í™” ìŠ¤íƒ€ì¼ */
    .itinerary-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: var(--space-6);
    }

    /* ì¼ì • í—¤ë” */
    .itinerary-header {
      background: var(--gray-50);
      border: 1px solid var(--gray-200);
      border-radius: 8px;
      padding: var(--space-3);
      margin-bottom: var(--space-6);
      text-align: center;
    }

    .trip-summary-text {
      font-size: var(--text-lg);
      font-weight: var(--font-semibold);
      color: var(--gray-800);
    }

    /* ì•¡ì…˜ ë²„íŠ¼ë“¤ */
    .itinerary-actions {
      display: flex;
      gap: var(--space-4);
      margin-bottom: var(--space-8);
      justify-content: center;
    }

    .itinerary-actions .btn {
      min-width: 120px;
      padding: var(--space-2) var(--space-4);
    }

    /* ë‚ ì§œë³„ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
    .day-tabs {
      display: flex;
      gap: var(--space-2);
      margin-bottom: var(--space-6);
      overflow-x: auto;
      padding-bottom: var(--space-2);
    }

    .day-tab {
      background: white;
      border: 2px solid var(--gray-200);
      border-radius: 12px;
      padding: var(--space-4) var(--space-6);
      cursor: pointer;
      transition: all 0.2s ease;
      white-space: nowrap;
      min-width: 120px;
      text-align: center;
    }

    .day-tab:hover {
      border-color: var(--primary-blue);
      background: var(--gray-50);
    }

    .day-tab.active {
      background: var(--primary-blue);
      color: white;
      border-color: var(--primary-blue);
    }

    .day-tab .tab-date {
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
      margin-bottom: var(--space-1);
    }

    .day-tab .tab-day {
      font-size: var(--text-lg);
      font-weight: var(--font-semibold);
    }

    .day-tab .regenerate-btn {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 6px;
      padding: var(--space-1) var(--space-2);
      font-size: var(--text-xs);
      color: white;
      cursor: pointer;
      margin-top: var(--space-2);
      transition: all 0.2s ease;
      display: none;
    }

    .day-tab.active .regenerate-btn {
      display: block;
    }

    .day-tab .regenerate-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      border-color: rgba(255, 255, 255, 0.5);
    }

    .day-tab:not(.active) .regenerate-btn {
      background: var(--gray-100);
      border-color: var(--gray-300);
      color: var(--gray-600);
    }

    .day-tab:not(.active) .regenerate-btn:hover {
      background: var(--gray-200);
      border-color: var(--gray-400);
    }

    /* ì¼ì • ì»¨í…ì¸  */
    .day-content {
      display: none;
    }

    .day-content.active {
      display: block;
      animation: fadeIn 0.3s ease-in-out;
    }

    /* íƒ€ì„ë¼ì¸ */
    .timeline {
      position: relative;
      padding-left: var(--space-8);
    }

    .timeline::before {
      content: '';
      position: absolute;
      left: var(--space-4);
      top: 0;
      bottom: 0;
      width: 2px;
      background: var(--gray-300);
    }

    .timeline-item {
      position: relative;
      margin-bottom: var(--space-6);
    }

    .timeline-item::before {
      content: '';
      position: absolute;
      left: calc(-1 * var(--space-4) - 6px);
      top: var(--space-4);
      width: 12px;
      height: 12px;
      background: var(--primary-blue);
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 0 0 2px var(--primary-blue);
    }

    .time-slot {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      transition: all 0.2s ease;
    }

    .time-slot:hover {
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
    }

    .time-header {
      background: var(--gray-50);
      padding: var(--space-4);
      border-bottom: 1px solid var(--gray-200);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .time-label {
      font-size: var(--text-lg);
      font-weight: var(--font-semibold);
      color: var(--primary-blue);
    }

    .time-period {
      font-size: var(--text-sm);
      color: var(--gray-600);
      background: white;
      padding: var(--space-1) var(--space-3);
      border-radius: 20px;
    }

    /* ì¥ì†Œ ì¹´ë“œë“¤ */
    .places-grid {
      padding: var(--space-6);
      display: grid;
      gap: var(--space-4);
    }

    .place-card {
      display: flex;
      gap: var(--space-4);
      align-items: center;
      padding: var(--space-4);
      border: 1px solid var(--gray-200);
      border-radius: 8px;
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .place-card:hover {
      background: var(--gray-50);
      border-color: var(--primary-blue);
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .place-number {
      background: var(--primary-blue);
      color: white;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: var(--font-semibold);
      font-size: var(--text-sm);
      flex-shrink: 0;
    }

    .place-info {
      flex: 1;
    }

    .place-name {
      font-size: var(--text-lg);
      font-weight: var(--font-semibold);
      margin-bottom: var(--space-1);
      color: var(--gray-800);
    }

    .place-address {
      font-size: var(--text-sm);
      color: var(--gray-600);
      margin-bottom: var(--space-2);
    }

    .place-details {
      display: flex;
      gap: var(--space-4);
      font-size: var(--text-sm);
      color: var(--gray-500);
    }

    .place-detail {
      display: flex;
      align-items: center;
      gap: var(--space-1);
    }

    .place-actions {
      display: flex;
      gap: var(--space-2);
      flex-shrink: 0;
    }

    .action-btn {
      background: none;
      border: 1px solid var(--gray-300);
      border-radius: 6px;
      padding: var(--space-2);
      cursor: pointer;
      transition: all 0.2s ease;
      color: var(--gray-600);
      min-width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .action-btn:hover {
      background: var(--primary-blue);
      color: white;
      border-color: var(--primary-blue);
    }

    .action-btn.map-btn:hover {
      background: var(--secondary-orange);
      border-color: var(--secondary-orange);
    }

    .action-btn.edit-btn:hover {
      background: var(--info);
      border-color: var(--info);
    }

    .action-btn.delete-btn:hover {
      background: var(--error);
      border-color: var(--error);
    }

    /* ì´ë™ ì‹œê°„ í‘œì‹œ */
    .travel-time {
      text-align: center;
      padding: var(--space-3);
      margin: var(--space-2) 0;
      background: var(--gray-100);
      border-radius: 8px;
      font-size: var(--text-sm);
      color: var(--gray-600);
    }

    .travel-time .travel-icon {
      margin-right: var(--space-2);
    }

    /* ë¹ˆ ìƒíƒœ */
    .empty-state {
      text-align: center;
      padding: var(--space-12);
      color: var(--gray-500);
    }

    .empty-state .empty-icon {
      font-size: 4rem;
      margin-bottom: var(--space-4);
      opacity: 0.5;
    }

    /* ì¬ìƒì„± ê´€ë ¨ ìŠ¤íƒ€ì¼ */
    .regeneration-loading {
      text-align: center;
      padding: var(--space-12);
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      border-radius: 16px;
      border: 2px dashed var(--primary-blue-light);
    }

    .regeneration-loading h3 {
      color: var(--primary-blue);
      margin-bottom: var(--space-4);
      font-size: var(--text-xl);
    }

    .regeneration-loading p {
      color: var(--gray-600);
      margin-bottom: var(--space-6);
    }

    .loading-progress {
      margin: var(--space-6) 0;
    }

    .progress-bar {
      width: 100%;
      height: 12px;
      background: var(--gray-200);
      border-radius: 6px;
      overflow: hidden;
      margin-bottom: var(--space-3);
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-blue), var(--primary-blue-light));
      border-radius: 6px;
      width: 0%;
      transition: width 0.3s ease;
    }

    .progress-text {
      font-size: var(--text-sm);
      color: var(--gray-600);
      font-weight: var(--font-medium);
    }

    .new-generated {
      border: 2px solid var(--success);
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.05), rgba(16, 185, 129, 0.1));
    }

    .new-indicator {
      background: var(--success);
      color: white;
      padding: var(--space-1) var(--space-2);
      border-radius: 12px;
      font-size: var(--text-xs);
      font-weight: var(--font-medium);
      margin-top: var(--space-3);
      display: inline-block;
    }

    /* ì»¤ìŠ¤í…€ ë‹¤ì´ì–¼ë¡œê·¸ ìŠ¤íƒ€ì¼ */
    .custom-dialog-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .custom-dialog-overlay.show {
      opacity: 1;
    }

    .custom-dialog {
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      max-width: 480px;
      width: 90%;
      max-height: 80vh;
      overflow: hidden;
      transform: scale(0.8) translateY(20px);
      transition: transform 0.3s ease;
    }

    .custom-dialog-overlay.show .custom-dialog {
      transform: scale(1) translateY(0);
    }

    .dialog-header {
      background: linear-gradient(135deg, var(--primary-blue), var(--primary-blue-light));
      color: white;
      padding: var(--space-6);
      text-align: center;
    }

    .dialog-title {
      margin: 0;
      font-size: var(--text-xl);
      font-weight: var(--font-semibold);
    }

    .dialog-body {
      padding: var(--space-8);
      text-align: center;
    }

    .dialog-message {
      color: var(--gray-700);
      font-size: var(--text-base);
      line-height: 1.6;
      margin: 0;
    }

    .dialog-footer {
      padding: var(--space-6);
      display: flex;
      gap: var(--space-4);
      justify-content: center;
      border-top: 1px solid var(--gray-200);
    }

    .dialog-footer .btn {
      min-width: 100px;
      padding: var(--space-3) var(--space-6);
    }

    /* ì»¤ìŠ¤í…€ í† ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
    .custom-toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
      border: 1px solid var(--gray-200);
      padding: var(--space-4);
      display: flex;
      align-items: center;
      justify-content: space-between;
      min-width: 320px;
      max-width: 480px;
      z-index: 10001;
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }

    .custom-toast.show {
      transform: translateX(0);
    }

    .toast-content {
      display: flex;
      align-items: center;
      gap: var(--space-3);
    }

    .toast-icon {
      font-size: var(--text-lg);
      flex-shrink: 0;
    }

    .toast-message {
      color: var(--gray-800);
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
    }

    .toast-close {
      background: none;
      border: none;
      color: var(--gray-500);
      font-size: var(--text-lg);
      cursor: pointer;
      padding: var(--space-1);
      border-radius: 4px;
      transition: background-color 0.2s ease;
      flex-shrink: 0;
    }

    .toast-close:hover {
      background: var(--gray-100);
      color: var(--gray-700);
    }

    /* í† ìŠ¤íŠ¸ ìœ í˜•ë³„ ìŠ¤íƒ€ì¼ */
    .toast-success {
      border-left: 4px solid var(--success);
    }

    .toast-error {
      border-left: 4px solid var(--error);
    }

    .toast-warning {
      border-left: 4px solid var(--warning);
    }

    .toast-info {
      border-left: 4px solid var(--info);
    }

    /* ë°˜ì‘í˜• */
    @media (max-width: 767px) {
      .itinerary-container {
        padding: var(--space-4);
      }

      .itinerary-header {
        padding: var(--space-3);
      }

      .itinerary-actions {
        flex-direction: column;
        align-items: center;
      }

      .itinerary-actions .btn {
        width: 100%;
        max-width: 300px;
      }

      .day-tabs {
        justify-content: flex-start;
      }

      .timeline {
        padding-left: var(--space-6);
      }

      .place-card {
        flex-direction: column;
        align-items: flex-start;
      }

      .place-actions {
        align-self: stretch;
        justify-content: space-between;
      }

      .places-grid {
        padding: var(--space-4);
      }

      /* ëª¨ë°”ì¼ì—ì„œ í† ìŠ¤íŠ¸ ìœ„ì¹˜ ì¡°ì • */
      .custom-toast {
        top: 10px;
        right: 10px;
        left: 10px;
        min-width: auto;
        max-width: none;
      }

      /* ëª¨ë°”ì¼ì—ì„œ ë‹¤ì´ì–¼ë¡œê·¸ ì¡°ì • */
      .custom-dialog {
        margin: var(--space-4);
        max-width: none;
        width: calc(100% - var(--space-8));
      }

      .dialog-header {
        padding: var(--space-4);
      }

      .dialog-body {
        padding: var(--space-6);
      }

      .dialog-footer {
        padding: var(--space-4);
        flex-direction: column;
      }

      .dialog-footer .btn {
        width: 100%;
      }
    }

    @media (min-width: 768px) {
      .places-grid {
        grid-template-columns: 1fr;
      }
    }

    /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      padding: var(--space-6);
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-4);
      padding-bottom: var(--space-4);
      border-bottom: 1px solid var(--gray-200);
    }

    .modal-title {
      font-size: var(--text-xl);
      font-weight: var(--font-semibold);
      margin: 0;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: var(--text-2xl);
      cursor: pointer;
      color: var(--gray-500);
      padding: var(--space-2);
    }

    .modal-close:hover {
      color: var(--gray-800);
    }

    /* ìƒíƒœ í‘œì‹œ */
    .status-badge {
      display: inline-block;
      padding: var(--space-1) var(--space-3);
      border-radius: 20px;
      font-size: var(--text-xs);
      font-weight: var(--font-medium);
      text-transform: uppercase;
    }

    .status-badge.verified {
      background: rgba(16, 185, 129, 0.1);
      color: var(--success);
    }

    .status-badge.unverified {
      background: rgba(245, 158, 11, 0.1);
      color: var(--warning);
    }

    /* Navigation Progress Styles */
    .nav-progress-wrapper {
      background: #f9fafb;
      border-bottom: 1px solid #e5e7eb;
      padding: 16px 0;
    }

    .nav-progress-steps {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 24px;
      max-width: 600px;
      margin: 0 auto;
      flex-wrap: nowrap;
    }

    .nav-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      flex-shrink: 0;
      min-width: fit-content;
    }

    .nav-step--done {
      cursor: pointer;
    }

    .nav-step--done:hover {
      opacity: 0.8;
    }

    .nav-step__circle {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
      background: #d1d5db;
      color: #6b7280;
      transition: all 0.2s ease;
    }

    .nav-step--done .nav-step__circle {
      background: #10b981;
      color: white;
    }

    .nav-step--current .nav-step__circle {
      background: #2e86ab;
      color: white;
    }

    .nav-step__label {
      font-size: 12px;
      color: #6b7280;
      text-align: center;
      white-space: nowrap;
    }

    .nav-step--done .nav-step__label {
      color: #10b981;
    }

    .nav-step--current .nav-step__label {
      color: #2e86ab;
      font-weight: 600;
    }

    /* ë‹¤ì‹œ ìƒì„± ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    
    .regenerate-modal {
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--space-6);
      border-bottom: 1px solid var(--gray-200);
    }
    
    .modal-header h3 {
      margin: 0;
      font-size: var(--text-xl);
      font-weight: var(--font-semibold);
      color: var(--gray-800);
    }
    
    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      color: var(--gray-500);
      cursor: pointer;
      padding: var(--space-2);
      line-height: 1;
    }
    
    .modal-close:hover {
      color: var(--gray-700);
    }
    
    .modal-body {
      padding: var(--space-6);
    }
    
    .modal-description {
      color: var(--gray-600);
      margin-bottom: var(--space-6);
      line-height: 1.6;
    }
    
    .request-section {
      text-align: left;
    }
    
    .request-label {
      display: block;
      font-size: var(--text-base);
      font-weight: var(--font-medium);
      color: var(--gray-800);
      margin-bottom: var(--space-3);
    }
    
    .request-textarea {
      width: 100%;
      padding: var(--space-4);
      border: 2px solid var(--gray-300);
      border-radius: 12px;
      font-size: var(--text-base);
      font-family: inherit;
      resize: vertical;
      min-height: 80px;
      transition: all 0.3s ease;
      background: white;
      line-height: 1.5;
    }
    
    .request-textarea:focus {
      outline: none;
      border-color: var(--primary-blue);
      box-shadow: 0 0 0 3px rgba(46, 134, 171, 0.1);
    }
    
    .request-textarea::placeholder {
      color: var(--gray-500);
      font-style: italic;
    }
    
    .char-count {
      text-align: right;
      font-size: var(--text-sm);
      color: var(--gray-500);
      margin-top: var(--space-2);
    }

    /* ì‹œì‘ì‹œê°„ ì…ë ¥ ìŠ¤íƒ€ì¼ */
    .start-time-section {
      margin: var(--space-6) 0 var(--space-6) 0;
      text-align: left;
      width: 100%;
    }

    .time-input-wrapper {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      max-width: 300px;
    }

    .time-input {
      width: 80px;
      padding: var(--space-3);
      border: 2px solid var(--gray-300);
      border-radius: 8px;
      font-size: var(--text-base);
      font-family: inherit;
      text-align: center;
      transition: all 0.3s ease;
      background: white;
    }

    .time-input:focus {
      outline: none;
      border-color: var(--primary-blue);
      box-shadow: 0 0 0 3px rgba(46, 134, 171, 0.1);
    }

    .time-unit {
      font-size: var(--text-base);
      color: var(--gray-700);
      font-weight: var(--font-medium);
    }
    
    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: var(--space-3);
      padding: var(--space-6);
      border-top: 1px solid var(--gray-200);
    }
    
    @media (max-width: 768px) {
      .nav-progress-steps {
        gap: 16px;
        overflow-x: auto;
        padding: 0 8px;
      }
      
      .nav-step__label {
        font-size: 10px;
      }
      
      .nav-step__circle {
        width: 28px;
        height: 28px;
        font-size: 12px;
      }
      
      .regenerate-modal {
        width: 95%;
        margin: var(--space-4);
      }
      
      .modal-header, .modal-body, .modal-footer {
        padding: var(--space-4);
      }
    }
    
    /* ì‚¬ìš©ì ìš”ì²­ì‚¬í•­ í‘œì‹œ ìŠ¤íƒ€ì¼ */
    .user-request-info {
      background: rgba(46, 134, 171, 0.1);
      border-left: 4px solid var(--primary-blue);
      padding: var(--space-3);
      margin: var(--space-4) 0;
      border-radius: 4px;
      font-size: var(--text-sm);
      color: var(--gray-700);
      font-style: italic;
    }

    /* ì‚¬ìš©ì ë©”ë‰´ ìŠ¤íƒ€ì¼ */
    .user-menu {
        position: relative;
    }
    
    .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--primary-blue);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: var(--font-medium);
        cursor: pointer;
    }
    
    .notification-badge {
        position: absolute;
        top: -2px;
        right: -2px;
        width: 12px;
        height: 12px;
        background: var(--error);
        border-radius: 50%;
        border: 2px solid white;
    }
  </style>
</head>
<body>
  <header class="header">
    <nav class="nav container">
      <a href="01-ëŒ€ì‹œë³´ë“œ.html" class="nav-brand">TripGen</a>
      <ul class="nav-menu">
        <li><a href="01-ëŒ€ì‹œë³´ë“œ.html" class="nav-link">í™ˆ</a></li>
        <li><a href="02-ê¸°ë³¸ì„¤ì •.html" class="nav-link">ìƒˆ ì—¬í–‰ ê³„íš</a></li>
        <li><a href="javascript:showTravelListInfo()" class="nav-link">ì—¬í–‰ë³´ê¸°</a></li>
        <li><a href="09-ì£¼ë³€ì¥ì†Œê²€ìƒ‰.html" class="nav-link">ì£¼ë³€ì¥ì†Œ ê²€ìƒ‰</a></li>
      </ul>
      
      <div class="nav-actions flex items-center gap-4">
        <button class="btn btn-secondary btn-sm" onclick="window.location.href='02-ê¸°ë³¸ì„¤ì •.html'">ìƒˆ ì—¬í–‰ ì‹œì‘</button>
        <div class="user-menu">
          <div class="user-avatar">
            ê¹€
            <span class="notification-badge"></span>
          </div>
        </div>
        <button class="mobile-menu-toggle">â˜°</button>
      </div>
    </nav>
  </header>

  <div class="mobile-overlay"></div>

  <main class="main">
    <!-- Navigation Progress -->
    <div class="nav-progress-wrapper">
      <div class="container">
        <div class="nav-progress-steps">
          <div class="nav-step nav-step--done" onclick="navigateToTripStep('02-ê¸°ë³¸ì„¤ì •.html')" style="cursor: pointer;">
            <div class="nav-step__circle">1</div>
            <span class="nav-step__label">ê¸°ë³¸ì„¤ì •</span>
          </div>
          <div class="nav-step nav-step--done" onclick="navigateToTripStep('03-ì—¬í–‰ì¼ì •ì„¤ì •.html')" style="cursor: pointer;">
            <div class="nav-step__circle">2</div>
            <span class="nav-step__label">ì¼ì •ì„¤ì •</span>
          </div>
          <div class="nav-step nav-step--done" onclick="navigateToTripStep('05-AIì¼ì •ìƒì„±.html')" style="cursor: pointer;">
            <div class="nav-step__circle">3</div>
            <span class="nav-step__label">AIì¼ì •ìƒì„±</span>
          </div>
          <div class="nav-step nav-step--current">
            <div class="nav-step__circle">4</div>
            <span class="nav-step__label">ì¼ì •ì¡°íšŒ</span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="itinerary-container">
      <!-- ì¼ì • í—¤ë” -->
      <div class="itinerary-header">
        <div class="trip-summary-text">ìœ ëŸ½ê°€ì¡±ì—¬í–‰(4ëª…)</div>
      </div>

      <!-- ì•¡ì…˜ ë²„íŠ¼ë“¤ -->
      <div class="itinerary-actions">
        <button class="btn btn-primary" onclick="regenerateItinerary()">
          ğŸ”„ ì¼ì • ì¬ìƒì„±
        </button>
      </div>

      <!-- ë‚ ì§œë³„ íƒ­ -->
      <div class="day-tabs">
        <div class="day-tab active" data-day="1">
          <div class="tab-date">9ì›” 1ì¼ (ì¼)</div>
          <div class="tab-day">1ì¼ì°¨ ë®Œí—¨</div>
          <button class="regenerate-btn" onclick="regenerateDay(1)">ğŸ”„ ë‹¤ì‹œ ìƒì„±</button>
        </div>
        <div class="day-tab" data-day="2">
          <div class="tab-date">9ì›” 2ì¼ (ì›”)</div>
          <div class="tab-day">2ì¼ì°¨ ë®Œí—¨</div>
          <button class="regenerate-btn" onclick="regenerateDay(2)">ğŸ”„ ë‹¤ì‹œ ìƒì„±</button>
        </div>
        <div class="day-tab" data-day="3">
          <div class="tab-date">9ì›” 3ì¼ (í™”)</div>
          <div class="tab-day">3ì¼ì°¨ ì˜ì¸ ë¶€ë¥´í¬</div>
          <button class="regenerate-btn" onclick="regenerateDay(3)">ğŸ”„ ë‹¤ì‹œ ìƒì„±</button>
        </div>
        <div class="day-tab" data-day="4">
          <div class="tab-date">9ì›” 4ì¼ (ìˆ˜)</div>
          <div class="tab-day">4ì¼ì°¨ ì˜ì¸ ë¶€ë¥´í¬</div>
          <button class="regenerate-btn" onclick="regenerateDay(4)">ğŸ”„ ë‹¤ì‹œ ìƒì„±</button>
        </div>
        <div class="day-tab" data-day="5">
          <div class="tab-date">9ì›” 5ì¼ (ëª©)</div>
          <div class="tab-day">5ì¼ì°¨ ì˜ì¸ ë¶€ë¥´í¬</div>
          <button class="regenerate-btn" onclick="regenerateDay(5)">ğŸ”„ ë‹¤ì‹œ ìƒì„±</button>
        </div>
        <div class="day-tab" data-day="6">
          <div class="tab-date">9ì›” 6ì¼ (ê¸ˆ)</div>
          <div class="tab-day">6ì¼ì°¨ ëŒë¡œë¯¸í‹°</div>
          <button class="regenerate-btn" onclick="regenerateDay(6)">ğŸ”„ ë‹¤ì‹œ ìƒì„±</button>
        </div>
        <div class="day-tab" data-day="7">
          <div class="tab-date">9ì›” 7ì¼ (í† )</div>
          <div class="tab-day">7ì¼ì°¨ ëŒë¡œë¯¸í‹°</div>
          <button class="regenerate-btn" onclick="regenerateDay(7)">ğŸ”„ ë‹¤ì‹œ ìƒì„±</button>
        </div>
        <div class="day-tab" data-day="8">
          <div class="tab-date">9ì›” 8ì¼ (ì¼)</div>
          <div class="tab-day">8ì¼ì°¨ ëŒë¡œë¯¸í‹°</div>
          <button class="regenerate-btn" onclick="regenerateDay(8)">ğŸ”„ ë‹¤ì‹œ ìƒì„±</button>
        </div>
        <div class="day-tab" data-day="9">
          <div class="tab-date">9ì›” 9ì¼ (ì›”)</div>
          <div class="tab-day">9ì¼ì°¨ ëŒë¡œë¯¸í‹°</div>
          <button class="regenerate-btn" onclick="regenerateDay(9)">ğŸ”„ ë‹¤ì‹œ ìƒì„±</button>
        </div>
        <div class="day-tab" data-day="10">
          <div class="tab-date">9ì›” 10ì¼ (í™”)</div>
          <div class="tab-day">10ì¼ì°¨ ëŒë¡œë¯¸í‹°</div>
          <button class="regenerate-btn" onclick="regenerateDay(10)">ğŸ”„ ë‹¤ì‹œ ìƒì„±</button>
        </div>
      </div>

      <!-- ì²«ì§¸ ë‚  ì¼ì • -->
      <div class="day-content active" id="day-1">
        <div class="timeline">
          <!-- ì˜¤ì „ ì¼ì • -->
          <div class="timeline-item">
            <div class="time-slot">
              <div class="time-header">
                <div class="time-label">09:00 - 12:00</div>
                <div class="time-period">ì˜¤ì „</div>
              </div>
              
              <div class="places-grid">
                <div class="place-card" onclick="window.location.href='07-ì¥ì†Œìƒì„¸ì •ë³´.html'">
                  <div class="place-number">1</div>
                  <div class="place-info">
                    <div class="place-name">ë§ˆë¦¬ì—”í”Œë¼ì¸  ì‹œê³„íƒ‘</div>
                    <div class="place-address">Marienplatz 1, 80331 MÃ¼nchen, ë…ì¼</div>
                    <div class="place-details">
                      <div class="place-detail">
                        <span>â±ï¸</span>
                        <span>2ì‹œê°„</span>
                      </div>
                      <div class="place-detail">
                        <span>ğŸ›ï¸</span>
                        <span>ì—­ì‚¬ì  ê´‘ì¥</span>
                      </div>
                      <div class="place-detail">
                        <span class="status-badge verified">ê²€ì¦ì™„ë£Œ</span>
                      </div>
                    </div>
                  </div>
                  <div class="place-actions">
                    <button class="action-btn delete-btn" onclick="event.stopPropagation(); deletePlace(1)" data-tooltip="ì‚­ì œ">
                      ğŸ—‘ï¸
                    </button>
                  </div>
                </div>

                <div class="travel-time">
                  <span class="travel-icon">ğŸš—</span>
                  ì°¨ëŸ‰ìœ¼ë¡œ 10ë¶„ ì´ë™ (ë§ˆë¦¬ì—”í”Œë¼ì¸  â†’ ë®Œí—¨ ë ˆì§€ë´ì¸ )
                </div>

                <div class="place-card" onclick="window.location.href='07-ì¥ì†Œìƒì„¸ì •ë³´.html'">
                  <div class="place-number">2</div>
                  <div class="place-info">
                    <div class="place-name">ë®Œí—¨ ë ˆì§€ë´ì¸  ê¶ì „</div>
                    <div class="place-address">ResidenzstraÃŸe 1, 80333 MÃ¼nchen, ë…ì¼</div>
                    <div class="place-details">
                      <div class="place-detail">
                        <span>â±ï¸</span>
                        <span>1ì‹œê°„ 30ë¶„</span>
                      </div>
                      <div class="place-detail">
                        <span>ğŸ°</span>
                        <span>ì™•ê¶/ë°•ë¬¼ê´€</span>
                      </div>
                      <div class="place-detail">
                        <span class="status-badge verified">ê²€ì¦ì™„ë£Œ</span>
                      </div>
                    </div>
                  </div>
                  <div class="place-actions">
                    <button class="action-btn delete-btn" onclick="event.stopPropagation(); deletePlace(2)" data-tooltip="ì‚­ì œ">
                      ğŸ—‘ï¸
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- ì ì‹¬ ì¼ì • -->
          <div class="timeline-item">
            <div class="time-slot">
              <div class="time-header">
                <div class="time-label">12:00 - 14:00</div>
                <div class="time-period">ì ì‹¬</div>
              </div>
              
              <div class="places-grid">
                <div class="place-card" onclick="window.location.href='07-ì¥ì†Œìƒì„¸ì •ë³´.html'">
                  <div class="place-number">3</div>
                  <div class="place-info">
                    <div class="place-name">í˜¸í”„ë¸Œë¡œì´í•˜ìš°ìŠ¤</div>
                    <div class="place-address">Platzl 9, 80331 MÃ¼nchen, ë…ì¼</div>
                    <div class="place-details">
                      <div class="place-detail">
                        <span>â±ï¸</span>
                        <span>1ì‹œê°„ 30ë¶„</span>
                      </div>
                      <div class="place-detail">
                        <span>ğŸº</span>
                        <span>ì „í†µ ë§¥ì£¼ì§‘</span>
                      </div>
                      <div class="place-detail">
                        <span class="status-badge verified">ê²€ì¦ì™„ë£Œ</span>
                      </div>
                    </div>
                  </div>
                  <div class="place-actions">
                    <button class="action-btn delete-btn" onclick="event.stopPropagation(); deletePlace(3)" data-tooltip="ì‚­ì œ">
                      ğŸ—‘ï¸
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- ì˜¤í›„ ì¼ì • -->
          <div class="timeline-item">
            <div class="time-slot">
              <div class="time-header">
                <div class="time-label">14:30 - 18:00</div>
                <div class="time-period">ì˜¤í›„</div>
              </div>
              
              <div class="places-grid">
                <div class="place-card" onclick="window.location.href='07-ì¥ì†Œìƒì„¸ì •ë³´.html'">
                  <div class="place-number">4</div>
                  <div class="place-info">
                    <div class="place-name">ë‹˜íœë¶€ë¥´í¬ ê¶ì „</div>
                    <div class="place-address">SchloÃŸ Nymphenburg 1, 80638 MÃ¼nchen, ë…ì¼</div>
                    <div class="place-details">
                      <div class="place-detail">
                        <span>â±ï¸</span>
                        <span>2ì‹œê°„</span>
                      </div>
                      <div class="place-detail">
                        <span>ğŸ°</span>
                        <span>ë°”ë¡œí¬ ê¶ì „</span>
                      </div>
                      <div class="place-detail">
                        <span class="status-badge verified">ê²€ì¦ì™„ë£Œ</span>
                      </div>
                    </div>
                  </div>
                  <div class="place-actions">
                    <button class="action-btn delete-btn" onclick="event.stopPropagation(); deletePlace(4)" data-tooltip="ì‚­ì œ">
                      ğŸ—‘ï¸
                    </button>
                  </div>
                </div>

                <div class="travel-time">
                  <span class="travel-icon">ğŸš—</span>
                  ì°¨ëŸ‰ìœ¼ë¡œ 20ë¶„ ì´ë™ (ë‹˜íœë¶€ë¥´í¬ â†’ ì‰ê¸€ë¦¬ì…” ê°€ë¥´í…)
                </div>

                <div class="place-card" onclick="window.location.href='07-ì¥ì†Œìƒì„¸ì •ë³´.html'">
                  <div class="place-number">5</div>
                  <div class="place-info">
                    <div class="place-name">ì‰ê¸€ë¦¬ì…” ê°€ë¥´í…</div>
                    <div class="place-address">Englischer Garten, 80538 MÃ¼nchen, ë…ì¼</div>
                    <div class="place-details">
                      <div class="place-detail">
                        <span>â±ï¸</span>
                        <span>1ì‹œê°„ 30ë¶„</span>
                      </div>
                      <div class="place-detail">
                        <span>ğŸŒ³</span>
                        <span>ë„ì‹œê³µì›</span>
                      </div>
                      <div class="place-detail">
                        <span class="status-badge verified">ê²€ì¦ì™„ë£Œ</span>
                      </div>
                    </div>
                  </div>
                  <div class="place-actions">
                    <button class="action-btn delete-btn" onclick="event.stopPropagation(); deletePlace(5)" data-tooltip="ì‚­ì œ">
                      ğŸ—‘ï¸
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- ì €ë… ì¼ì • -->
          <div class="timeline-item">
            <div class="time-slot">
              <div class="time-header">
                <div class="time-label">18:30 - 21:00</div>
                <div class="time-period">ì €ë…</div>
              </div>
              
              <div class="places-grid">
                <div class="place-card" onclick="window.location.href='07-ì¥ì†Œìƒì„¸ì •ë³´.html'">
                  <div class="place-number">6</div>
                  <div class="place-info">
                    <div class="place-name">ë¼í…í•˜ìš°ìŠ¤</div>
                    <div class="place-address">MÃ¼nzstraÃŸe 8, 80331 MÃ¼nchen, ë…ì¼</div>
                    <div class="place-details">
                      <div class="place-detail">
                        <span>â±ï¸</span>
                        <span>2ì‹œê°„</span>
                      </div>
                      <div class="place-detail">
                        <span>ğŸ¥¨</span>
                        <span>ë°”ì´ì—ë¥¸ ì „í†µìš”ë¦¬</span>
                      </div>
                      <div class="place-detail">
                        <span class="status-badge verified">ê²€ì¦ì™„ë£Œ</span>
                      </div>
                    </div>
                  </div>
                  <div class="place-actions">
                    <button class="action-btn delete-btn" onclick="event.stopPropagation(); deletePlace(6)" data-tooltip="ì‚­ì œ">
                      ğŸ—‘ï¸
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ë‘˜ì§¸ ë‚  ì¼ì • -->
      <div class="day-content" id="day-2">
        <div class="timeline">
          <div class="timeline-item">
            <div class="time-slot">
              <div class="time-header">
                <div class="time-label">09:00 - 12:00</div>
                <div class="time-period">ì˜¤ì „</div>
              </div>
              
              <div class="places-grid">
                <div class="place-card" onclick="window.location.href='07-ì¥ì†Œìƒì„¸ì •ë³´.html'">
                  <div class="place-number">1</div>
                  <div class="place-info">
                    <div class="place-name">ì¸ í‚¤ì§€ ì‹œì¥</div>
                    <div class="place-address">ë„ì¿„ë„ ì¸„ì˜¤êµ¬ ì¸ í‚¤ì§€ 5-2-1</div>
                    <div class="place-details">
                      <div class="place-detail">
                        <span>â±ï¸</span>
                        <span>2ì‹œê°„</span>
                      </div>
                      <div class="place-detail">
                        <span>ğŸŸ</span>
                        <span>ì‹œì¥/ìŒì‹</span>
                      </div>
                      <div class="place-detail">
                        <span class="status-badge verified">ê²€ì¦ì™„ë£Œ</span>
                      </div>
                    </div>
                  </div>
                  <div class="place-actions">
                    <button class="action-btn delete-btn" onclick="event.stopPropagation(); deletePlace(7)" data-tooltip="ì‚­ì œ">
                      ğŸ—‘ï¸
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ì…‹ì§¸ ë‚  ì¼ì • -->
      <div class="day-content" id="day-3">
        <div class="timeline">
          <div class="timeline-item">
            <div class="time-slot">
              <div class="time-header">
                <div class="time-label">09:00 - 12:00</div>
                <div class="time-period">ì˜¤ì „</div>
              </div>
              
              <div class="places-grid">
                <div class="place-card" onclick="window.location.href='07-ì¥ì†Œìƒì„¸ì •ë³´.html'">
                  <div class="place-number">1</div>
                  <div class="place-info">
                    <div class="place-name">ë„ì¿„ì—­ & ì‡¼í•‘</div>
                    <div class="place-address">ë„ì¿„ë„ ì¹˜ìš”ë‹¤êµ¬ ë§ˆë£¨ë…¸ìš°ì¹˜ 1-9-1</div>
                    <div class="place-details">
                      <div class="place-detail">
                        <span>â±ï¸</span>
                        <span>3ì‹œê°„</span>
                      </div>
                      <div class="place-detail">
                        <span>ğŸ›ï¸</span>
                        <span>ì‡¼í•‘/ê¸°ë…í’ˆ</span>
                      </div>
                      <div class="place-detail">
                        <span class="status-badge verified">ê²€ì¦ì™„ë£Œ</span>
                      </div>
                    </div>
                  </div>
                  <div class="place-actions">
                    <button class="action-btn delete-btn" onclick="event.stopPropagation(); deletePlace(8)" data-tooltip="ì‚­ì œ">
                      ğŸ—‘ï¸
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- ë‹¤ì‹œ ìƒì„± ìš”ì²­ì‚¬í•­ ëª¨ë‹¬ -->
  <div id="regenerateModal" class="modal-overlay" style="display: none;">
    <div class="modal-content regenerate-modal">
      <div class="modal-header">
        <h3 id="regenerateModalTitle">ì¼ì • ë‹¤ì‹œ ìƒì„±</h3>
        <button class="modal-close" onclick="closeRegenerateModal()">&times;</button>
      </div>
      
      <div class="modal-body">
        <p class="modal-description">
          í•´ë‹¹ ë‚ ì§œ ì¼ì •ì„ AIê°€ ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤. ê¸°ì¡´ ì¼ì •ì€ ìƒˆë¡œìš´ ì¼ì •ìœ¼ë¡œ ëŒ€ì²´ë©ë‹ˆë‹¤.
        </p>
        
        <!-- ì‹œì‘ì‹œê°„ ì…ë ¥ -->
        <div class="start-time-section">
          <div class="time-input-wrapper">
            <label for="dayStartTime" class="request-label">
              ì—¬í–‰ ì‹œì‘ì‹œê°„
            </label>
            <input 
              type="number" 
              id="dayStartTime" 
              class="time-input"
              placeholder="09"
              min="0"
              max="23"
              value="9">
            <span class="time-unit">ì‹œ</span>
          </div>
        </div>

        <!-- ìš”ì²­ì‚¬í•­ ì…ë ¥ -->
        <div class="request-section">
          <label for="dayRegenerateRequest" class="request-label">
            íŠ¹ë³„í•œ ìš”ì²­ì‚¬í•­ì´ ìˆë‚˜ìš”? (ì„ íƒì‚¬í•­)
          </label>
          <textarea 
            id="dayRegenerateRequest" 
            class="request-textarea"
            placeholder="ì˜ˆ: ë§›ì§‘ ìœ„ì£¼ë¡œ êµ¬ì„±í•´ì£¼ì„¸ìš”. ëŒ€ì¤‘êµí†µìœ¼ë¡œ ì‰½ê²Œ ì´ë™í•  ìˆ˜ ìˆëŠ” ê³³ë“¤ë¡œ ë¶€íƒë“œë¦½ë‹ˆë‹¤."
            maxlength="300"
            rows="3">
          </textarea>
          <div class="char-count">
            <span id="dayCharCount">0</span>/300ì
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeRegenerateModal()">ì·¨ì†Œ</button>
        <button class="btn btn-primary" onclick="confirmRegenerate()">ë‹¤ì‹œ ìƒì„±</button>
      </div>
    </div>
  </div>

  <!-- ì¥ì†Œ ìƒì„¸ ì •ë³´ ëª¨ë‹¬ -->
  <div class="modal" id="placeDetailModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">ì¥ì†Œ ìƒì„¸ ì •ë³´</h3>
        <button class="modal-close" onclick="TripGen.closeModal('placeDetailModal')">&times;</button>
      </div>
      <div class="modal-body">
        <div id="placeDetailContent">
          <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ˆ ë‚´ìš© -->
        </div>
      </div>
    </div>
  </div>

  <!-- ì¼ì • ìˆ˜ì • ëª¨ë‹¬ -->
  <div class="modal" id="editItineraryModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">ì¼ì • ìˆ˜ì •</h3>
        <button class="modal-close" onclick="TripGen.closeModal('editItineraryModal')">&times;</button>
      </div>
      <div class="modal-body">
        <p>ì¼ì • ìˆ˜ì • ê¸°ëŠ¥ì´ ê³§ ì œê³µë©ë‹ˆë‹¤.</p>
        <p>í˜„ì¬ëŠ” ê°œë³„ ì¥ì†Œì˜ ìˆ˜ì •ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2025 TripGen. ëª¨ë“  ê¶Œë¦¬ ë³´ìœ .</p>
    </div>
  </footer>

  <script src="assets/js/common.js"></script>
  <script>
    // ë‚ ì§œë³„ íƒ­ ì „í™˜ ê¸°ëŠ¥
    function initDayTabs() {
      const tabs = document.querySelectorAll('.day-tab');
      const contents = document.querySelectorAll('.day-content');

      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const dayNumber = tab.getAttribute('data-day');
          
          // ëª¨ë“  íƒ­ê³¼ ì»¨í…ì¸  ë¹„í™œì„±í™”
          tabs.forEach(t => t.classList.remove('active'));
          contents.forEach(c => c.classList.remove('active'));
          
          // ì„ íƒëœ íƒ­ê³¼ ì»¨í…ì¸  í™œì„±í™”
          tab.classList.add('active');
          document.getElementById(`day-${dayNumber}`).classList.add('active');
        });
      });
    }

    // ì¼ì • ê´€ë ¨ ê¸°ëŠ¥ë“¤
    function regenerateItinerary() {
      // ë°”ë¡œ AIì¼ì •ìƒì„± í˜ì´ì§€ë¡œ ì´ë™
      window.location.href = '05-AIì¼ì •ìƒì„±.html';
    }

    function editItinerary() {
      TripGen.openModal('editItineraryModal');
    }

    function saveItinerary() {
      // ì €ì¥ ë¡œì§
      TripGen.showToast('ì¼ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
    }

    function shareItinerary() {
      // ê³µìœ  ê¸°ëŠ¥
      if (navigator.share) {
        navigator.share({
          title: 'ë„ì¿„ 3ì¼ 2ë°• ì—¬í–‰ ì¼ì •',
          text: 'AIê°€ ìƒì„±í•œ ë§ì¶¤í˜• ì—¬í–‰ ì¼ì •ì„ í™•ì¸í•´ë³´ì„¸ìš”!',
          url: window.location.href
        });
      } else {
        // í´ë°±: URL ë³µì‚¬
        navigator.clipboard.writeText(window.location.href).then(() => {
          TripGen.showToast('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        });
      }
    }

    // ì¥ì†Œ ê´€ë ¨ ê¸°ëŠ¥ë“¤
    function showMap(placeId) {
      // ì§€ë„ ë³´ê¸° (ì„ì‹œ)
      TripGen.showToast('ì§€ë„ ê¸°ëŠ¥ì´ ê³§ ì œê³µë©ë‹ˆë‹¤.', 'info');
    }

    function editPlace(placeId) {
      // ì¥ì†Œ ìƒì„¸ ì •ë³´ í‘œì‹œ
      const placeDetails = {
        1: {
          name: 'ì„¼ì†Œì§€ (æµ…è‰å¯º)',
          address: 'ë„ì¿„ë„ ë‹¤ì´í† êµ¬ ì•„ì‚¬ì¿ ì‚¬ 2-3-1',
          description: 'ë„ì¿„ì—ì„œ ê°€ì¥ ì˜¤ë˜ëœ ì‚¬ì›ìœ¼ë¡œ, 628ë…„ì— ì°½ê±´ë˜ì—ˆìŠµë‹ˆë‹¤. ì „í†µì ì¸ ì¼ë³¸ ë¬¸í™”ë¥¼ ì²´í—˜í•  ìˆ˜ ìˆëŠ” ëŒ€í‘œì ì¸ ê´€ê´‘ì§€ì…ë‹ˆë‹¤.',
          openHours: '06:00 - 17:00',
          phone: '+81-3-3842-0181',
          website: 'https://www.senso-ji.jp/',
          rating: 4.5,
          price: 'ë¬´ë£Œ',
          tips: 'ì´ë¥¸ ì•„ì¹¨ì— ë°©ë¬¸í•˜ë©´ ìƒëŒ€ì ìœ¼ë¡œ í•œì í•©ë‹ˆë‹¤. ì£¼ë³€ ë‚˜ì¹´ë¯¸ì„¸ë„ë¦¬ì—ì„œ ê¸°ë…í’ˆ ì‡¼í•‘ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.'
        }
        // ë‹¤ë¥¸ ì¥ì†Œë“¤ë„ ì¶”ê°€ ê°€ëŠ¥
      };

      const place = placeDetails[placeId];
      if (place) {
        document.getElementById('placeDetailContent').innerHTML = `
          <div class="place-detail-info">
            <h4>${place.name}</h4>
            <p><strong>ì£¼ì†Œ:</strong> ${place.address}</p>
            <p><strong>ì„¤ëª…:</strong> ${place.description}</p>
            <p><strong>ìš´ì˜ì‹œê°„:</strong> ${place.openHours}</p>
            <p><strong>ì „í™”ë²ˆí˜¸:</strong> ${place.phone}</p>
            <p><strong>ì›¹ì‚¬ì´íŠ¸:</strong> <a href="${place.website}" target="_blank">${place.website}</a></p>
            <p><strong>í‰ì :</strong> â­ ${place.rating}/5.0</p>
            <p><strong>ì…ì¥ë£Œ:</strong> ${place.price}</p>
            <p><strong>íŒ:</strong> ${place.tips}</p>
          </div>
        `;
        TripGen.openModal('placeDetailModal');
      }
    }

    function deletePlace(placeId) {
      TripGen.confirmDialog('ì´ ì¥ì†Œë¥¼ ì¼ì •ì—ì„œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?', () => {
        // ì‚­ì œ ë¡œì§ (ì‹¤ì œë¡œëŠ” ì„œë²„ í†µì‹ )
        TripGen.showToast('ì¥ì†Œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        // DOMì—ì„œ í•´ë‹¹ ì¥ì†Œ ì¹´ë“œ ì œê±°í•˜ëŠ” ë¡œì§ ì¶”ê°€ ê°€ëŠ¥
      });
    }

    // ë‚ ì§œë³„ ì¼ì • ë‹¤ì‹œ ìƒì„± ê¸°ëŠ¥
    function regenerateDay(dayNumber) {
      // ì´ë²¤íŠ¸ ë²„ë¸”ë§ ë°©ì§€
      event.stopPropagation();
      
      const dayNames = {
        1: 'ì²«ì§¸ ë‚ ',
        2: 'ë‘˜ì§¸ ë‚ ', 
        3: 'ì…‹ì§¸ ë‚ '
      };
      
      const dayName = dayNames[dayNumber] || `${dayNumber}ë²ˆì§¸ ë‚ `;
      
      // ëª¨ë‹¬ ì œëª© ì—…ë°ì´íŠ¸
      document.getElementById('regenerateModalTitle').textContent = `${dayName} ì¼ì • ë‹¤ì‹œ ìƒì„±`;
      
      // ê¸°ì¡´ ìš”ì²­ì‚¬í•­ê³¼ ì‹œì‘ì‹œê°„ ë¶ˆëŸ¬ì˜¤ê¸° (ìˆë‹¤ë©´)
      const savedRequest = localStorage.getItem(`dayRequest_${dayNumber}`) || '';
      const savedStartTime = localStorage.getItem(`dayStartTime_${dayNumber}`) || '9';
      
      const textarea = document.getElementById('dayRegenerateRequest');
      const charCount = document.getElementById('dayCharCount');
      const startTimeInput = document.getElementById('dayStartTime');
      
      textarea.value = savedRequest;
      charCount.textContent = savedRequest.length;
      startTimeInput.value = savedStartTime;
      
      // ëª¨ë‹¬ í‘œì‹œ
      document.getElementById('regenerateModal').style.display = 'flex';
      
      // í˜„ì¬ ë‚ ì§œ ì €ì¥
      window.currentRegenerateDay = dayNumber;
    }

    // ëª¨ë‹¬ ë‹«ê¸°
    function closeRegenerateModal() {
      document.getElementById('regenerateModal').style.display = 'none';
      window.currentRegenerateDay = null;
    }
    
    // ë‹¤ì‹œ ìƒì„± í™•ì •
    function confirmRegenerate() {
      const dayNumber = window.currentRegenerateDay;
      if (dayNumber === null) return;
      
      const textarea = document.getElementById('dayRegenerateRequest');
      const startTimeInput = document.getElementById('dayStartTime');
      const userRequest = textarea.value.trim();
      const startTime = startTimeInput.value;
      
      // ìš”ì²­ì‚¬í•­ê³¼ ì‹œì‘ì‹œê°„ ì €ì¥
      if (userRequest) {
        localStorage.setItem(`dayRequest_${dayNumber}`, userRequest);
        console.log(`${dayNumber}ì¼ì°¨ ìš”ì²­ì‚¬í•­:`, userRequest);
      }
      localStorage.setItem(`dayStartTime_${dayNumber}`, startTime);
      console.log(`${dayNumber}ì¼ì°¨ ì‹œì‘ì‹œê°„:`, startTime + 'ì‹œ');
      
      // ëª¨ë‹¬ ë‹«ê¸°
      closeRegenerateModal();
      
      // ì‹¤ì œ ì¬ìƒì„± ì‹¤í–‰
      regenerateDayItinerary(dayNumber, userRequest);
    }
    
    function regenerateDayItinerary(dayNumber, userRequest = '') {
      const dayContent = document.getElementById(`day-${dayNumber}`);
      const originalContent = dayContent.innerHTML;
      
      try {
        // ì‚¬ìš©ì ìš”ì²­ì‚¬í•­ í‘œì‹œ
        const requestInfo = userRequest ? `<p class="user-request-info">íŠ¹ë³„ ìš”ì²­: ${userRequest}</p>` : '';
        
        // ë¡œë”© ìƒíƒœë¡œ ë³€ê²½
        dayContent.innerHTML = `
          <div class="regeneration-loading">
            <div class="loading-spinner"></div>
            <h3>AIê°€ ${dayNumber}ì¼ì°¨ ì¼ì •ì„ ìƒˆë¡œ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</h3>
            <p>ê¸°ì¡´ ì—¬í–‰ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë” ë‚˜ì€ ì¼ì •ì„ ë§Œë“¤ì–´ë“œë¦´ê²Œìš”.</p>
            ${requestInfo}
            <div class="loading-progress">
              <div class="progress-bar">
                <div class="progress-fill" id="regenerateProgress"></div>
              </div>
              <div class="progress-text" id="progressText">ì¥ì†Œ ë¶„ì„ ì¤‘...</div>
            </div>
            <button class="btn btn-secondary btn-sm" onclick="cancelRegeneration(${dayNumber}, \`${originalContent.replace(/`/g, '\\`')}\`)">
              ì·¨ì†Œ
            </button>
          </div>
        `;

        // ì§„í–‰ë¥  ì‹œë®¬ë ˆì´ì…˜
        simulateRegenerationProgress(dayNumber, originalContent);
        
      } catch (error) {
        console.error('ì¼ì • ì¬ìƒì„± ì¤‘ ì˜¤ë¥˜:', error);
        showCustomToast('ì¼ì • ì¬ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
        dayContent.innerHTML = originalContent;
      }
    }

    function simulateRegenerationProgress(dayNumber, originalContent) {
      const progressFill = document.getElementById('regenerateProgress');
      const progressText = document.getElementById('progressText');
      
      if (!progressFill || !progressText) return;
      
      const steps = [
        { progress: 20, text: 'ê¸°ì¡´ ì¼ì • ë¶„ì„ ì¤‘...' },
        { progress: 40, text: 'ìƒˆë¡œìš´ ì¥ì†Œ ê²€ìƒ‰ ì¤‘...' },
        { progress: 60, text: 'ì´ë™ ê²½ë¡œ ìµœì í™” ì¤‘...' },
        { progress: 80, text: 'ì¼ì • ì¡°ì • ì¤‘...' },
        { progress: 100, text: 'ìƒˆë¡œìš´ ì¼ì • ìƒì„± ì™„ë£Œ!' }
      ];
      
      let currentStep = 0;
      
      const progressInterval = setInterval(() => {
        if (currentStep < steps.length) {
          const step = steps[currentStep];
          progressFill.style.width = step.progress + '%';
          progressText.textContent = step.text;
          currentStep++;
        } else {
          clearInterval(progressInterval);
          // ì¬ìƒì„± ì™„ë£Œ
          setTimeout(() => {
            completeRegeneration(dayNumber);
          }, 1000);
        }
      }, 800);
    }

    function completeRegeneration(dayNumber) {
      const dayContent = document.getElementById(`day-${dayNumber}`);
      
      // ìƒˆë¡œìš´ ì¼ì • ë°ì´í„° (ì‹œë®¬ë ˆì´ì…˜)
      const newItineraries = {
        1: generateNewDayItinerary('ì²«ì§¸ ë‚ ', [
          { time: '09:00', name: 'ìš°ì—ë…¸ ê³µì›', type: 'ê´€ê´‘', duration: '2ì‹œê°„', move: '15ë¶„' },
          { time: '11:30', name: 'ë„ì¿„êµ­ë¦½ë°•ë¬¼ê´€', type: 'ë¬¸í™”', duration: '2ì‹œê°„', move: '10ë¶„' },
          { time: '14:00', name: 'ì•„ë©”ìš”ì½” ì‹œì¥', type: 'ì‡¼í•‘', duration: '1.5ì‹œê°„', move: '20ë¶„' },
          { time: '16:30', name: 'ì„¼ì†Œì§€ ì ˆ', type: 'ê´€ê´‘', duration: '1.5ì‹œê°„', move: '25ë¶„' },
          { time: '19:00', name: 'ìŠ¤ì¹´ì´íŠ¸ë¦¬ íƒ€ìš´', type: 'ê´€ê´‘', duration: '2ì‹œê°„', move: '0ë¶„' }
        ]),
        2: generateNewDayItinerary('ë‘˜ì§¸ ë‚ ', [
          { time: '10:00', name: 'ë©”ì´ì§€ ì‹ ê¶', type: 'ë¬¸í™”', duration: '1.5ì‹œê°„', move: '10ë¶„' },
          { time: '12:00', name: 'í•˜ë¼ì£¼ì¿  ê±°ë¦¬', type: 'ì‡¼í•‘', duration: '2ì‹œê°„', move: '15ë¶„' },
          { time: '15:00', name: 'ì‹œë¶€ì•¼ ìŠ¤ì¹´ì´', type: 'ê´€ê´‘', duration: '1ì‹œê°„', move: '5ë¶„' },
          { time: '17:00', name: 'ì‹œë¶€ì•¼ í¬ë¡œì‹±', type: 'ê´€ê´‘', duration: '1ì‹œê°„', move: '10ë¶„' },
          { time: '19:00', name: 'ë¡¯í°ê¸° íì¦ˆ', type: 'ê´€ê´‘', duration: '2ì‹œê°„', move: '0ë¶„' }
        ]),
        3: generateNewDayItinerary('ì…‹ì§¸ ë‚ ', [
          { time: '09:30', name: 'ì¸ í‚¤ì§€ ì¥ì™¸ì‹œì¥', type: 'ìŒì‹', duration: '2ì‹œê°„', move: '20ë¶„' },
          { time: '12:30', name: 'í™©ê¶ ë™ìª½ ì •ì›', type: 'ê´€ê´‘', duration: '1.5ì‹œê°„', move: '15ë¶„' },
          { time: '15:00', name: 'ê¸´ì ê±°ë¦¬', type: 'ì‡¼í•‘', duration: '2ì‹œê°„', move: '10ë¶„' },
          { time: '18:00', name: 'ë„ì¿„ì—­ ì£¼ë³€', type: 'ìŒì‹', duration: '1.5ì‹œê°„', move: '0ë¶„' }
        ])
      };
      
      dayContent.innerHTML = newItineraries[dayNumber] || originalContent;
      
      showCustomToast(`${dayNumber}ì¼ì°¨ ì¼ì •ì´ ìƒˆë¡­ê²Œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'success', 4000);
    }

    function generateNewDayItinerary(dayName, places) {
      // ì‹œê°„ëŒ€ë³„ë¡œ ê·¸ë£¹ ë‚˜ëˆ„ê¸°
      const morningPlaces = places.slice(0, Math.ceil(places.length / 2));
      const afternoonPlaces = places.slice(Math.ceil(places.length / 2));
      
      let html = '<div class="timeline">';
      
      // ì˜¤ì „ ì¼ì •
      if (morningPlaces.length > 0) {
        html += `
          <div class="timeline-item">
            <div class="time-slot">
              <div class="time-header">
                <div class="time-label">09:00 - 12:00</div>
                <div class="time-period">ì˜¤ì „</div>
              </div>
              
              <div class="places-grid">
                ${morningPlaces.map((place, index) => `
                  <div class="place-card new-generated" onclick="window.location.href='07-ì¥ì†Œìƒì„¸ì •ë³´.html'">
                    <div class="place-number">${index + 1}</div>
                    <div class="place-info">
                      <div class="place-name">${place.name}</div>
                      <div class="place-address">${getPlaceAddress(place.name)}</div>
                      <div class="place-details">
                        <div class="place-detail">
                          <span>â±ï¸</span>
                          <span>${place.duration}</span>
                        </div>
                        <div class="place-detail">
                          <span>${getTypeIcon(place.type)}</span>
                          <span>${getCategoryName(place.type)}</span>
                        </div>
                        <div class="place-detail">
                          <span class="status-badge verified">ê²€ì¦ì™„ë£Œ</span>
                        </div>
                      </div>
                    </div>
                    <div class="place-actions">
                      <button class="action-btn delete-btn" onclick="event.stopPropagation(); deletePlace(${index + 1})" data-tooltip="ì‚­ì œ">
                        ğŸ—‘ï¸
                      </button>
                    </div>
                    <div class="new-indicator">ğŸ†• ìƒˆë¡œ ìƒì„±ëœ ì¼ì •</div>
                  </div>
                  
                  ${index < morningPlaces.length - 1 ? `
                    <div class="travel-time">
                      <span class="travel-icon">ğŸš‡</span>
                      ${getMoveMethod(place.type)}ë¡œ ${place.move} ì´ë™ (${getRandomDistance()})
                    </div>
                  ` : ''}
                `).join('')}
              </div>
            </div>
          </div>
        `;
      }
      
      // ì˜¤í›„ ì¼ì •
      if (afternoonPlaces.length > 0) {
        html += `
          <div class="timeline-item">
            <div class="time-slot">
              <div class="time-header">
                <div class="time-label">13:00 - 18:00</div>
                <div class="time-period">ì˜¤í›„</div>
              </div>
              
              <div class="places-grid">
                ${afternoonPlaces.map((place, index) => `
                  <div class="place-card new-generated" onclick="window.location.href='07-ì¥ì†Œìƒì„¸ì •ë³´.html'">
                    <div class="place-number">${morningPlaces.length + index + 1}</div>
                    <div class="place-info">
                      <div class="place-name">${place.name}</div>
                      <div class="place-address">${getPlaceAddress(place.name)}</div>
                      <div class="place-details">
                        <div class="place-detail">
                          <span>â±ï¸</span>
                          <span>${place.duration}</span>
                        </div>
                        <div class="place-detail">
                          <span>${getTypeIcon(place.type)}</span>
                          <span>${getCategoryName(place.type)}</span>
                        </div>
                        <div class="place-detail">
                          <span class="status-badge verified">ê²€ì¦ì™„ë£Œ</span>
                        </div>
                      </div>
                    </div>
                    <div class="place-actions">
                      <button class="action-btn delete-btn" onclick="event.stopPropagation(); deletePlace(${morningPlaces.length + index + 1})" data-tooltip="ì‚­ì œ">
                        ğŸ—‘ï¸
                      </button>
                    </div>
                    <div class="new-indicator">ğŸ†• ìƒˆë¡œ ìƒì„±ëœ ì¼ì •</div>
                  </div>
                  
                  ${index < afternoonPlaces.length - 1 ? `
                    <div class="travel-time">
                      <span class="travel-icon">ğŸš‡</span>
                      ${getMoveMethod(place.type)}ë¡œ ${place.move} ì´ë™ (${getRandomDistance()})
                    </div>
                  ` : ''}
                `).join('')}
              </div>
            </div>
          </div>
        `;
      }
      
      html += '</div>';
      return html;
    }

    function getTypeIcon(type) {
      const icons = {
        'ê´€ê´‘': 'ğŸ›ï¸',
        'ë¬¸í™”': 'ğŸ­', 
        'ì‡¼í•‘': 'ğŸ›ï¸',
        'ìŒì‹': 'ğŸ½ï¸'
      };
      return icons[type] || 'ğŸ“';
    }

    function getTypeName(type) {
      const names = {
        'ê´€ê´‘': 'ê´€ê´‘ì§€',
        'ë¬¸í™”': 'ë¬¸í™”ì²´í—˜',
        'ì‡¼í•‘': 'ì‡¼í•‘',
        'ìŒì‹': 'ë§›ì§‘'
      };
      return names[type] || 'ì¥ì†Œ';
    }

    function cancelRegeneration(dayNumber, originalContent) {
      const dayContent = document.getElementById(`day-${dayNumber}`);
      dayContent.innerHTML = originalContent;
      showCustomToast('ì¼ì • ì¬ìƒì„±ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
    }

    // ì¥ì†Œ ì •ë³´ë¥¼ ìœ„í•œ í—¬í¼ í•¨ìˆ˜ë“¤
    function getPlaceAddress(placeName) {
      const addresses = {
        'ìš°ì—ë…¸ ê³µì›': 'ë„ì¿„ë„ ë‹¤ì´í† êµ¬ ìš°ì—ë…¸ì½”ì—”',
        'ë„ì¿„êµ­ë¦½ë°•ë¬¼ê´€': 'ë„ì¿„ë„ ë‹¤ì´í† êµ¬ ìš°ì—ë…¸ì½”ì—” 13-9',
        'ì•„ë©”ìš”ì½” ì‹œì¥': 'ë„ì¿„ë„ ë‹¤ì´í† êµ¬ ìš°ì—ë…¸ 4-10-10',
        'ì„¼ì†Œì§€ ì ˆ': 'ë„ì¿„ë„ ë‹¤ì´í† êµ¬ ì•„ì‚¬ì¿ ì‚¬ 2-3-1',
        'ìŠ¤ì¹´ì´íŠ¸ë¦¬ íƒ€ìš´': 'ë„ì¿„ë„ ìŠ¤ë¯¸ë‹¤êµ¬ ì˜¤ì‹œì•„ê²Œ 1-1-2',
        'ë©”ì´ì§€ ì‹ ê¶': 'ë„ì¿„ë„ ì‹œë¶€ì•¼êµ¬ ì‹œë¶€ì•¼ 1-1',
        'í•˜ë¼ì£¼ì¿  ê±°ë¦¬': 'ë„ì¿„ë„ ì‹œë¶€ì•¼êµ¬ ì§„êµ¬ë§ˆì— 1-19-9',
        'ì‹œë¶€ì•¼ ìŠ¤ì¹´ì´': 'ë„ì¿„ë„ ì‹œë¶€ì•¼êµ¬ ì‹œë¶€ì•¼ 2-24-12',
        'ì‹œë¶€ì•¼ í¬ë¡œì‹±': 'ë„ì¿„ë„ ì‹œë¶€ì•¼êµ¬ ë„ê²ìì¹´ 1-1',
        'ë¡¯í°ê¸° íì¦ˆ': 'ë„ì¿„ë„ ë¯¸ë‚˜í† êµ¬ ë¡¯í°ê¸° 6-10-1',
        'ì¸ í‚¤ì§€ ì¥ì™¸ì‹œì¥': 'ë„ì¿„ë„ ì¸„ì˜¤êµ¬ ì¸ í‚¤ì§€ 4-16-2',
        'í™©ê¶ ë™ìª½ ì •ì›': 'ë„ì¿„ë„ ì¹˜ìš”ë‹¤êµ¬ ì½”ì¿„ê°€ì´ì—” 1-1',
        'ê¸´ì ê±°ë¦¬': 'ë„ì¿„ë„ ì¸„ì˜¤êµ¬ ê¸´ì 4-6-16',
        'ë„ì¿„ì—­ ì£¼ë³€': 'ë„ì¿„ë„ ì¹˜ìš”ë‹¤êµ¬ ë§ˆë£¨ë…¸ìš°ì¹˜ 1-9-1'
      };
      return addresses[placeName] || 'ë„ì¿„ë„ ë‚´ ìœ„ì¹˜';
    }

    function getCategoryClass(type) {
      const classes = {
        'ê´€ê´‘': 'tourism',
        'ë¬¸í™”': 'culture',
        'ì‡¼í•‘': 'shopping',
        'ìŒì‹': 'restaurant'
      };
      return classes[type] || 'tourism';
    }

    function getCategoryName(type) {
      const names = {
        'ê´€ê´‘': 'ê´€ê´‘ì§€',
        'ë¬¸í™”': 'ë¬¸í™”ì²´í—˜',
        'ì‡¼í•‘': 'ì‡¼í•‘',
        'ìŒì‹': 'ë§›ì§‘'
      };
      return names[type] || 'ì¥ì†Œ';
    }

    function getRandomRating() {
      const ratings = ['4.2', '4.3', '4.4', '4.5', '4.6', '4.7', '4.8'];
      return ratings[Math.floor(Math.random() * ratings.length)];
    }

    function getMoveIcon(type) {
      return 'ğŸš‡'; // ì§€í•˜ì²  ì•„ì´ì½˜ í†µì¼
    }

    function getMoveMethod(type) {
      return 'ì§€í•˜ì² '; // ì´ë™ìˆ˜ë‹¨ í†µì¼
    }

    function getRandomDistance() {
      const distances = ['0.8km', '1.2km', '1.5km', '2.1km', '2.8km'];
      return distances[Math.floor(Math.random() * distances.length)];
    }

    // ì»¤ìŠ¤í…€ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ í•¨ìˆ˜
    function showCustomConfirmDialog(title, message, onConfirm) {
      // ê¸°ì¡´ ë‹¤ì´ì–¼ë¡œê·¸ê°€ ìˆìœ¼ë©´ ì œê±°
      const existingDialog = document.getElementById('customConfirmDialog');
      if (existingDialog) {
        existingDialog.remove();
      }

      // ë‹¤ì´ì–¼ë¡œê·¸ HTML ìƒì„±
      const dialogHTML = `
        <div id="customConfirmDialog" class="custom-dialog-overlay">
          <div class="custom-dialog">
            <div class="dialog-header">
              <h3 class="dialog-title">${title}</h3>
            </div>
            <div class="dialog-body">
              <p class="dialog-message">${message.replace(/\n/g, '<br>')}</p>
            </div>
            <div class="dialog-footer">
              <button class="btn btn-secondary" onclick="closeCustomDialog()">ì·¨ì†Œ</button>
              <button class="btn btn-primary" onclick="confirmCustomDialog()">í™•ì¸</button>
            </div>
          </div>
        </div>
      `;

      // ë‹¤ì´ì–¼ë¡œê·¸ë¥¼ bodyì— ì¶”ê°€
      document.body.insertAdjacentHTML('beforeend', dialogHTML);
      
      // í™•ì¸ ì½œë°± ì €ì¥
      window.customDialogCallback = onConfirm;
      
      // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
      setTimeout(() => {
        document.getElementById('customConfirmDialog').classList.add('show');
      }, 10);
    }

    function closeCustomDialog() {
      const dialog = document.getElementById('customConfirmDialog');
      if (dialog) {
        dialog.classList.remove('show');
        setTimeout(() => {
          dialog.remove();
        }, 300);
      }
      window.customDialogCallback = null;
    }

    function confirmCustomDialog() {
      if (window.customDialogCallback) {
        window.customDialogCallback();
      }
      closeCustomDialog();
    }

    // ì»¤ìŠ¤í…€ í† ìŠ¤íŠ¸ í•¨ìˆ˜
    function showCustomToast(message, type = 'info', duration = 3000) {
      // ê¸°ì¡´ í† ìŠ¤íŠ¸ ì œê±°
      const existingToast = document.getElementById('customToast');
      if (existingToast) {
        existingToast.remove();
      }

      const icons = {
        success: 'âœ…',
        error: 'âŒ', 
        warning: 'âš ï¸',
        info: 'â„¹ï¸'
      };

      const toastHTML = `
        <div id="customToast" class="custom-toast toast-${type}">
          <div class="toast-content">
            <span class="toast-icon">${icons[type] || icons.info}</span>
            <span class="toast-message">${message}</span>
          </div>
          <button class="toast-close" onclick="closeCustomToast()">Ã—</button>
        </div>
      `;

      document.body.insertAdjacentHTML('beforeend', toastHTML);
      
      // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
      setTimeout(() => {
        document.getElementById('customToast').classList.add('show');
      }, 10);

      // ìë™ ì œê±°
      setTimeout(() => {
        closeCustomToast();
      }, duration);
    }

    function closeCustomToast() {
      const toast = document.getElementById('customToast');
      if (toast) {
        toast.classList.remove('show');
        setTimeout(() => {
          toast.remove();
        }, 300);
      }
    }

    // ì—¬í–‰ ì •ë³´ ë¡œë“œ í•¨ìˆ˜
    function loadTripInfo() {
      // ê¸°ë³¸ì„¤ì •ì—ì„œ ì €ì¥ëœ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      let tripName = 'ì—¬í–‰ ê³„íš';
      let dateRange = '';
      
      try {
        // ê¸°ë³¸ì„¤ì • ë°ì´í„° ì½ê¸°
        const basicSettingsData = localStorage.getItem('basicSettingsData');
        if (basicSettingsData) {
          const data = JSON.parse(basicSettingsData);
          if (data.tripName && data.tripName.trim()) {
            tripName = data.tripName.trim();
            console.log('ì—¬í–‰ëª… ë¡œë“œë¨:', tripName);
          } else {
            console.warn('ê¸°ë³¸ì„¤ì •ì—ì„œ ì—¬í–‰ëª…ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
          }
        } else {
          console.warn('ê¸°ë³¸ì„¤ì • ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
        }
        
        // ì—¬í–‰ì¼ì • ë°ì´í„° ì½ê¸°
        const tripScheduleData = localStorage.getItem('tripScheduleData');
        if (tripScheduleData) {
          const scheduleData = JSON.parse(tripScheduleData);
          // ì²« ë²ˆì§¸ ì—¬í–‰ ê³„íšì˜ ë‚ ì§œ ì‚¬ìš©
          if (scheduleData.startDate_1 && scheduleData.endDate_1) {
            const startDate = new Date(scheduleData.startDate_1);
            const endDate = new Date(scheduleData.endDate_1);
            
            const startDateStr = startDate.toLocaleDateString('ko-KR', {
              month: 'long',
              day: 'numeric'
            });
            const endDateStr = endDate.toLocaleDateString('ko-KR', {
              month: 'long', 
              day: 'numeric'
            });
            
            dateRange = `(${startDateStr} ~ ${endDateStr})`;
          }
        }
      } catch (error) {
        console.warn('ì—¬í–‰ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
      }
      
      // ì—¬í–‰ëª…(ì‹œì‘ì¼ ~ ì¢…ë£Œì¼) í˜•ì‹ìœ¼ë¡œ ì—…ë°ì´íŠ¸
      const summaryText = document.querySelector('.trip-summary-text');
      if (summaryText) {
        summaryText.textContent = `${tripName}${dateRange}`;
      }
    }
    
    // ë‹¤ì‹œ ìƒì„± ëª¨ë‹¬ ì´ˆê¸°í™”
    function initRegenerateModal() {
      const textarea = document.getElementById('dayRegenerateRequest');
      const charCount = document.getElementById('dayCharCount');
      
      if (textarea && charCount) {
        // ê¸€ì ìˆ˜ ì¹´ìš´í„°
        textarea.addEventListener('input', () => {
          const count = textarea.value.length;
          charCount.textContent = count;
          
          // 250ì ì´ìƒì´ë©´ ê²½ê³  ìƒ‰ìƒ
          if (count >= 250) {
            charCount.style.color = 'var(--error)';
          } else if (count >= 200) {
            charCount.style.color = 'var(--warning)';
          } else {
            charCount.style.color = 'var(--gray-500)';
          }
        });
        
        // ì…ë ¥ ì‹œ ìë™ ì €ì¥
        textarea.addEventListener('input', () => {
          if (window.currentRegenerateDay) {
            localStorage.setItem(`dayRequest_${window.currentRegenerateDay}`, textarea.value);
          }
        });
      }

      // ì‹œì‘ì‹œê°„ ì…ë ¥ ì²˜ë¦¬
      const startTimeInput = document.getElementById('dayStartTime');
      if (startTimeInput) {
        // ì‹œê°„ ìœ íš¨ì„± ê²€ì‚¬
        startTimeInput.addEventListener('blur', () => {
          let value = parseInt(startTimeInput.value);
          if (isNaN(value) || value < 0) {
            value = 9;
          } else if (value > 23) {
            value = 23;
          }
          startTimeInput.value = value;
        });
      }
      
      // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
      const modal = document.getElementById('regenerateModal');
      if (modal) {
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            closeRegenerateModal();
          }
        });
      }
    }

    // í˜„ì¬ ì—¬í–‰ ì •ë³´ (ì—¬í–‰ì¤‘ ìƒíƒœë§Œ ì ‘ê·¼ ê°€ëŠ¥)
    const currentTrip = {
        id: 'europe-family-trip',
        name: 'ìœ ëŸ½ê°€ì¡±ì—¬í–‰',
        status: 'in-progress'  // í•­ìƒ ì—¬í–‰ì¤‘ ìƒíƒœ
    };

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', function() {
      loadTripInfo();
      initDayTabs();
      initRegenerateModal();
      
      // í˜ì´ì§€ ë¡œë“œ ì• ë‹ˆë©”ì´ì…˜
      setTimeout(() => {
        document.querySelectorAll('.timeline-item').forEach((item, index) => {
          setTimeout(() => {
            item.classList.add('fade-in');
          }, index * 100);
        });
      }, 300);
    });

    // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ê¸°ëŠ¥ (ê°„ë‹¨í•œ êµ¬í˜„)
    let draggedElement = null;

    document.querySelectorAll('.place-card').forEach(card => {
      card.setAttribute('draggable', true);
      
      card.addEventListener('dragstart', (e) => {
        draggedElement = e.target;
        e.target.style.opacity = '0.5';
      });
      
      card.addEventListener('dragend', (e) => {
        e.target.style.opacity = '';
        draggedElement = null;
      });
      
      card.addEventListener('dragover', (e) => {
        e.preventDefault();
      });
      
      card.addEventListener('drop', (e) => {
        e.preventDefault();
        if (draggedElement && draggedElement !== e.target) {
          // ì‹¤ì œ ì¬ì •ë ¬ ë¡œì§
          TripGen.showToast('ì¼ì • ìˆœì„œê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
        }
      });
    });

    // ìŠ¤í…Œí¼ ë„¤ë¹„ê²Œì´ì…˜ í•¨ìˆ˜
    function navigateToStep(url) {
      window.location.href = url;
    }
    
    // ì—¬í–‰ ìƒíƒœì— ë”°ë¥¸ ë„¤ë¹„ê²Œì´ì…˜ í•¨ìˆ˜
    function navigateToTripStep(url) {
      // í˜„ì¬ ì—¬í–‰ ìƒíƒœ í™•ì¸ (ì—¬í–‰ì¤‘: in-progress, ì¶”ì–µì¤‘: completed)
      const tripStatus = getTripStatus();
      
      if (tripStatus === 'completed') {
        // ì¶”ì–µì¤‘ì¸ ì—¬í–‰ì€ ì¡°íšŒë§Œ ê°€ëŠ¥
        if (url.includes('06-ìƒì„±ëœì¼ì •ì¡°íšŒ.html')) {
          window.location.href = url;
        } else {
          TripGen.showToast('ì™„ë£Œëœ ì—¬í–‰ì€ ì¡°íšŒë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.', 'info');
        }
      } else {
        // ì—¬í–‰ì¤‘ì´ê±°ë‚˜ ê³„íšì¤‘ì¸ ì—¬í–‰ì€ ëª¨ë“  í™”ë©´ ì´ë™ ê°€ëŠ¥
        window.location.href = url;
      }
    }
    
    // ì—¬í–‰ ìƒíƒœ í™•ì¸ í•¨ìˆ˜
    function getTripStatus() {
      // ì‹¤ì œë¡œëŠ” ì—¬í–‰ ë°ì´í„°ì—ì„œ ìƒíƒœë¥¼ ê°€ì ¸ì™€ì•¼ í•˜ì§€ë§Œ, 
      // í˜„ì¬ëŠ” ìœ ëŸ½ê°€ì¡±ì—¬í–‰ì´ 'ì—¬í–‰ì¤‘' ìƒíƒœë¡œ ì„¤ì •
      return 'in-progress'; // 'in-progress', 'completed', 'planning'
    }
  </script>
</body>
</html>