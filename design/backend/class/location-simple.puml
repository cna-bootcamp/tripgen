@startuml
!theme mono

title 장소 서비스(Location Service) 간단한 클래스 다이어그램

package "com.unicorn.tripgen.location" {
    
    ' ===== Domain Layer =====
    package "domain" {
        class Place
        class Location
        class OpeningHours
        class Review
        class Photo
        class NearbySearch
        
        enum PlaceCategory
        enum PriceLevel
        enum DayOfWeek
        
        interface PlaceRepository
        interface SearchRepository
    }
    
    ' ===== Application Layer =====
    package "application" {
        ' Use Cases
        class PlaceSearchUseCase
        class PlaceDetailUseCase
        class NearbySearchUseCase
        class PlaceValidationUseCase
        class ReviewUseCase
        
        ' Services
        class PlaceService
        class SearchService
        class ValidationService
        class CacheService
        
        ' Ports
        interface LocationSearchPort
        interface PlaceDetailPort
        interface CachePort
    }
    
    ' ===== Infrastructure Layer =====
    package "infrastructure" {
        ' Adapters
        class KakaoLocationAdapter
        class GooglePlacesAdapter
        class NaverLocationAdapter
        class RedisCacheAdapter
        
        ' Repository Implementations
        class PlaceRepositoryImpl
        class SearchRepositoryImpl
        
        ' External Service Clients
        class McpLocationClient
        class ProfileServiceClient
        
        ' Cache
        class PlaceCacheManager
        class SearchCacheManager
    }
    
    ' ===== Presentation Layer =====
    package "presentation" {
        class PlaceController
        class SearchController
        class ReviewController
        class ValidationController
    }
    
    ' ===== DTO Layer =====
    package "dto" {
        class PlaceSearchRequest
        class PlaceSearchResponse
        class PlaceDetailRequest
        class PlaceDetailResponse
        class NearbySearchRequest
        class NearbySearchResponse
        class ReviewRequest
        class ReviewResponse
    }
}

' 주요 관계 정의
' Domain 관계
Place "1" -- "1" Location : has
Place "1" -- "*" OpeningHours : has
Place "1" -- "*" Review : has
Place "1" -- "*" Photo : has
Place ..> PlaceCategory : uses
Place ..> PriceLevel : uses

' Application Layer 관계
PlaceSearchUseCase ..> SearchRepository : uses
PlaceDetailUseCase ..> PlaceRepository : uses
PlaceService ..> LocationSearchPort : uses
SearchService ..> CachePort : uses
ValidationService ..> McpLocationClient : uses

' Infrastructure 관계
KakaoLocationAdapter ..|> LocationSearchPort : implements
GooglePlacesAdapter ..|> LocationSearchPort : implements
NaverLocationAdapter ..|> LocationSearchPort : implements
RedisCacheAdapter ..|> CachePort : implements
PlaceRepositoryImpl ..|> PlaceRepository : implements
SearchRepositoryImpl ..|> SearchRepository : implements

' Presentation 관계
PlaceController ..> PlaceSearchUseCase : uses
PlaceController ..> PlaceDetailUseCase : uses
SearchController ..> NearbySearchUseCase : uses
PlaceController ..> PlaceSearchResponse : returns

' Cache 관계
PlaceCacheManager ..> RedisCacheAdapter : uses
SearchCacheManager ..> RedisCacheAdapter : uses

@enduml