# ë¬¼ë¦¬ ì•„í‚¤í…ì²˜ ì„¤ê³„ì„œ - ê°œë°œí™˜ê²½

## 1. ê°œìš”

### 1.1 ì„¤ê³„ ëª©ì 
- AI ê¸°ë°˜ ì—¬í–‰ ì¼ì • ìƒì„± ì„œë¹„ìŠ¤ì˜ **ê°œë°œí™˜ê²½** ë¬¼ë¦¬ ì•„í‚¤í…ì²˜ ì„¤ê³„
- MVP ë‹¨ê³„ì˜ ë¹ ë¥¸ ê°œë°œê³¼ ê²€ì¦ì„ ìœ„í•œ ìµœì†Œ êµ¬ì„±
- ë¹„ìš© íš¨ìœ¨ì„±ê³¼ ê°œë°œ í¸ì˜ì„± ìš°ì„ 

### 1.2 ì„¤ê³„ ì›ì¹™
- **MVP ìš°ì„ **: ë¹ ë¥¸ ê°œë°œê³¼ ê²€ì¦ì„ ìœ„í•œ ìµœì†Œ êµ¬ì„±
- **ë¹„ìš© ìµœì í™”**: Spot Instances, Local Storage í™œìš©
- **ê°œë°œ í¸ì˜ì„±**: ë³µì¡í•œ ì„¤ì • ìµœì†Œí™”, ë¹ ë¥¸ ë°°í¬
- **ë‹¨ìˆœì„±**: ìš´ì˜ ë³µì¡ë„ ìµœì†Œí™”

### 1.3 ì°¸ì¡° ì•„í‚¤í…ì²˜
- ë§ˆìŠ¤í„° ì•„í‚¤í…ì²˜: design/backend/physical/physical-architecture.md
- HighLevelì•„í‚¤í…ì²˜ì •ì˜ì„œ: design/high-level-architecture.md
- ë…¼ë¦¬ì•„í‚¤í…ì²˜: design/backend/logical/logical-architecture.md

## 2. ê°œë°œí™˜ê²½ ì•„í‚¤í…ì²˜ ê°œìš”

### 2.1 í™˜ê²½ íŠ¹ì„±
- **ëª©ì **: ë¹ ë¥¸ ê°œë°œê³¼ ê²€ì¦
- **ì‚¬ìš©ì**: ê°œë°œíŒ€ (5ëª…)
- **ê°€ìš©ì„±**: 95% (ì›” 36ì‹œê°„ ë‹¤ìš´íƒ€ì„ í—ˆìš©)
- **í™•ì¥ì„±**: ì œí•œì  (ê³ ì • ë¦¬ì†ŒìŠ¤)
- **ë³´ì•ˆ**: ê¸°ë³¸ ë³´ì•ˆ (ë³µì¡í•œ ë³´ì•ˆ ì„¤ì • ìµœì†Œí™”)

### 2.2 ì „ì²´ ì•„í‚¤í…ì²˜

ğŸ“„ **[ê°œë°œí™˜ê²½ ë¬¼ë¦¬ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨](./physical-architecture-dev.mmd)**

**ì£¼ìš” êµ¬ì„± ìš”ì†Œ:**
- NGINX Ingress Controller â†’ AKS ê¸°ë³¸ í´ëŸ¬ìŠ¤í„°
- ì• í”Œë¦¬ì¼€ì´ì…˜ Pod: User, Trip, AI, Location Service
- ë°±í‚¹ì„œë¹„ìŠ¤ Pod: PostgreSQL (Local Storage), Redis (Memory Only)
- Azure Service Bus Basic Tier ì—°ê²°

## 3. ì»´í“¨íŒ… ì•„í‚¤í…ì²˜

### 3.1 Azure Kubernetes Service (AKS) êµ¬ì„±

#### 3.1.1 í´ëŸ¬ìŠ¤í„° ì„¤ì •

| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| Kubernetes ë²„ì „ | 1.29 | ì•ˆì •í™”ëœ ìµœì‹  ë²„ì „ |
| ì„œë¹„ìŠ¤ ê³„ì¸µ | Basic | ë¹„ìš© ìµœì í™” |
| Network Plugin | Azure CNI | Azure ë„¤ì´í‹°ë¸Œ ë„¤íŠ¸ì›Œí‚¹ |
| Network Policy | Kubernetes Network Policies | ê¸°ë³¸ Pod í†µì‹  ì œì–´ |
| Ingress Controller | NGINX Ingress Controller | ì˜¤í”ˆì†ŒìŠ¤ Ingress |
| DNS | CoreDNS | í´ëŸ¬ìŠ¤í„° DNS |

#### 3.1.2 ë…¸ë“œ í’€ êµ¬ì„±

| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| VM í¬ê¸° | Standard_B2s | 2 vCPU, 4GB RAM |
| ë…¸ë“œ ìˆ˜ | 2 | ê³ ì • ë…¸ë“œ ìˆ˜ |
| ìë™ ìŠ¤ì¼€ì¼ë§ | Disabled | ë¹„ìš© ì ˆì•½ì„ ìœ„í•œ ê³ ì • í¬ê¸° |
| ìµœëŒ€ Pod ìˆ˜ | 30 | ë…¸ë“œë‹¹ ìµœëŒ€ Pod |
| ê°€ìš© ì˜ì—­ | Zone-1 | ë‹¨ì¼ ì˜ì—­ (ë¹„ìš© ì ˆì•½) |
| ê°€ê²© ì •ì±… | Spot Instance | 70% ë¹„ìš© ì ˆì•½ |

### 3.2 ì„œë¹„ìŠ¤ë³„ ë¦¬ì†ŒìŠ¤ í• ë‹¹

#### 3.2.1 ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤
| ì„œë¹„ìŠ¤ | CPU Requests | Memory Requests | CPU Limits | Memory Limits | Replicas |
|--------|--------------|-----------------|------------|---------------|----------|
| User Service | 50m | 128Mi | 200m | 256Mi | 1 |
| Trip Service | 100m | 256Mi | 500m | 512Mi | 1 |
| AI Service | 200m | 512Mi | 1000m | 1Gi | 1 |
| Location Service | 50m | 128Mi | 200m | 256Mi | 1 |

#### 3.2.2 ë°±í‚¹ ì„œë¹„ìŠ¤
| ì„œë¹„ìŠ¤ | CPU Requests | Memory Requests | CPU Limits | Memory Limits | Storage |
|--------|--------------|-----------------|------------|---------------|---------|
| PostgreSQL | 500m | 1Gi | 1000m | 2Gi | 20GB (hostPath) |
| Redis | 100m | 256Mi | 500m | 1Gi | Memory Only |

## 4. ë„¤íŠ¸ì›Œí¬ ì•„í‚¤í…ì²˜

### 4.1 ë„¤íŠ¸ì›Œí¬ êµ¬ì„±

#### 4.1.1 ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€

ğŸ“„ **[ê°œë°œí™˜ê²½ ë„¤íŠ¸ì›Œí¬ ë‹¤ì´ì–´ê·¸ë¨](./network-dev.mmd)**

**ë„¤íŠ¸ì›Œí¬ íë¦„:**
- ì¸í„°ë„· â†’ LoadBalancer Service â†’ NGINX Ingress Controller
- Ingress â†’ ClusterIP â†’ Application Services  
- Application Services â†’ ClusterIP â†’ Database Services

#### 4.1.2 ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ

**ê¸°ë³¸ Network Policy:**
| ì •ì±… ìœ í˜• | ì„¤ì • | ì„¤ëª… |
|-----------|------|---------|
| Default Policy | ALLOW_ALL_NAMESPACES | ê°œë°œ í¸ì˜ì„±ì„ ìœ„í•œ í—ˆìš©ì  ì •ì±… |
| Complexity Level | Basic | ë‹¨ìˆœí•œ ë³´ì•ˆ êµ¬ì„± |

**Database ì ‘ê·¼ ì œí•œ:**
| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| í—ˆìš© ëŒ€ìƒ | Application Tier Pods | tier: application ë ˆì´ë¸” |
| í”„ë¡œí† ì½œ | TCP | ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° |
| í¬íŠ¸ | 5432 | PostgreSQL ê¸°ë³¸ í¬íŠ¸ |

### 4.2 ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬

| ì„œë¹„ìŠ¤ | ë‚´ë¶€ ì£¼ì†Œ | í¬íŠ¸ | ìš©ë„ |
|--------|-----------|------|------|
| User Service | user-service.default.svc.cluster.local | 8080 | ì‚¬ìš©ì ê´€ë¦¬ API |
| Trip Service | trip-service.default.svc.cluster.local | 8080 | ì—¬í–‰ ê³„íš API |
| AI Service | ai-service.default.svc.cluster.local | 8080 | AI ì¼ì • ìƒì„± API |
| Location Service | location-service.default.svc.cluster.local | 8080 | ìœ„ì¹˜ ì •ë³´ API |
| PostgreSQL | postgresql.default.svc.cluster.local | 5432 | ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤ |
| Redis | redis.default.svc.cluster.local | 6379 | ìºì‹œ ì„œë²„ |

## 5. ë°ì´í„° ì•„í‚¤í…ì²˜

### 5.1 ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì„±

#### 5.1.1 PostgreSQL Pod êµ¬ì„±

**ê¸°ë³¸ ì„¤ì •:**
| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| ì´ë¯¸ì§€ | bitnami/postgresql:16 | ì•ˆì •í™”ëœ PostgreSQL 16 |
| CPU ìš”ì²­ | 500m | ê¸°ë³¸ CPU í• ë‹¹ |
| Memory ìš”ì²­ | 1Gi | ê¸°ë³¸ ë©”ëª¨ë¦¬ í• ë‹¹ |
| CPU ì œí•œ | 1000m | ìµœëŒ€ CPU ì‚¬ìš©ëŸ‰ |
| Memory ì œí•œ | 2Gi | ìµœëŒ€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ |

**ìŠ¤í† ë¦¬ì§€ ì„¤ì •:**
| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| ìŠ¤í† ë¦¬ì§€ íƒ€ì… | hostPath | ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ (ë¹„ìš© ì ˆì•½) |
| ìŠ¤í† ë¦¬ì§€ í¬ê¸° | 20Gi | ê°œë°œìš© ì¶©ë¶„í•œ ìš©ëŸ‰ |
| ë§ˆìš´íŠ¸ ê²½ë¡œ | /data/postgresql | ë°ì´í„° ì €ì¥ ê²½ë¡œ |

**ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •:**
| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| ìµœëŒ€ ì—°ê²° ìˆ˜ | 100 | ë™ì‹œ ì—°ê²° ì œí•œ |
| Shared Buffers | 256MB | ê³µìœ  ë²„í¼ í¬ê¸° |
| Effective Cache Size | 1GB | íš¨ê³¼ì  ìºì‹œ í¬ê¸° |
| ë°±ì—… ì „ëµ | ìˆ˜ë™ ë°±ì—… | ì£¼ 1íšŒ ìˆ˜ë™ ì‹¤í–‰ |

#### 5.1.2 Redis Pod êµ¬ì„±

**ê¸°ë³¸ ì„¤ì •:**
| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| ì´ë¯¸ì§€ | bitnami/redis:7.2 | ìµœì‹  ì•ˆì • Redis ë²„ì „ |
| CPU ìš”ì²­ | 100m | ê¸°ë³¸ CPU í• ë‹¹ |
| Memory ìš”ì²­ | 256Mi | ê¸°ë³¸ ë©”ëª¨ë¦¬ í• ë‹¹ |
| CPU ì œí•œ | 500m | ìµœëŒ€ CPU ì‚¬ìš©ëŸ‰ |
| Memory ì œí•œ | 1Gi | ìµœëŒ€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ |

**Redis ì„¤ì •:**
| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| ë°ì´í„° ì§€ì†ì„± | Disabled | ê°œë°œìš©, ì¬ì‹œì‘ ì‹œ ë°ì´í„° ì†ì‹¤ í—ˆìš© |
| ìµœëŒ€ ë©”ëª¨ë¦¬ | 512MB | ë©”ëª¨ë¦¬ ì‚¬ìš© ì œí•œ |
| ë©”ëª¨ë¦¬ ì •ì±… | allkeys-lru | LRU ë°©ì‹ ìºì‹œ ì œê±° |

### 5.2 ë°ì´í„° ê´€ë¦¬ ì „ëµ

#### 5.2.1 ë°ì´í„° ì´ˆê¸°í™”
```bash
# ê°œë°œ ë°ì´í„° ìë™ ìƒì„±
kubectl apply -f k8s/data-init/
# - í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ë°ì´í„°
# - ìƒ˜í”Œ ì—¬í–‰ì§€ ë°ì´í„°
# - AI ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ ë°ì´í„°
```

#### 5.2.2 ë°±ì—… ì „ëµ

| ì„œë¹„ìŠ¤ | ë°±ì—… ë°©ë²• | ì£¼ê¸° | ë³´ì¡´ ì „ëµ | ì°¸ê³ ì‚¬í•­ |
|--------|----------|------|-----------|----------|
| PostgreSQL | kubectl exec + pg_dump | ìˆ˜ë™ (í•„ìš” ì‹œ) | ë¡œì»¬ íŒŒì¼ ì €ì¥ | ê°œë°œìš© ë°ì´í„° ìˆ˜ë™ ê´€ë¦¬ |
| Redis | ì—†ìŒ | - | ë©”ëª¨ë¦¬ ì „ìš© | ì¬ì‹œì‘ ì‹œ ìºì‹œ ì¬êµ¬ì„± |

## 6. ë©”ì‹œì§• ì•„í‚¤í…ì²˜

### 6.1 Azure Service Bus êµ¬ì„±

#### 6.1.1 Basic Tier ì„¤ì •

**Service Bus ì „ì²´ ì„¤ì •:**
| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| ì„œë¹„ìŠ¤ ê³„ì¸µ | Basic | ë¹„ìš© ìµœì í™” ê³„ì¸µ |
| ë„¤ì„ìŠ¤í˜ì´ìŠ¤ | sb-tripgen-dev | ê°œë°œí™˜ê²½ ì „ìš© |
| ìµœëŒ€ í í¬ê¸° | 1GB | ì „ì²´ í ì‚¬ì´ì¦ˆ ì œí•œ |
| ë©”ì‹œì§€ TTL | 14ì¼ | ë©”ì‹œì§€ ìƒì¡´ ê¸°ê°„ |

**í ë³„ ì„¤ì •:**
| í ì´ë¦„ | ìµœëŒ€ í¬ê¸° | ì¤‘ë³µ ê°ì§€ | ìš©ë„ |
|--------|----------|----------|------|
| ai-schedule-generation | 256MB | Disabled | AI ì¼ì • ìƒì„± ìš”ì²­ |
| location-search | 256MB | Disabled | ìœ„ì¹˜ ê²€ìƒ‰ ìš”ì²­ |
| notification | 256MB | Disabled | ì•Œë¦¼ ë©”ì‹œì§€ |

#### 6.1.2 ì—°ê²° ì„¤ì •

| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| ì¸ì¦ ë°©ì‹ | Azure Managed Identity | ìš´ì˜í™˜ê²½ ëŒ€ë¹„ ë³´ì•ˆ ê°•í™” |
| ì—°ê²° í’€ë§ | Disabled | ê°œë°œí™˜ê²½ ë‹¨ìˆœ êµ¬ì„± |
| ì¬ì‹œë„ ì •ì±… | Basic | ê¸°ë³¸ ì¬ì‹œë„ ì„¤ì • |

## 7. ë³´ì•ˆ ì•„í‚¤í…ì²˜

### 7.1 ê°œë°œí™˜ê²½ ë³´ì•ˆ ì •ì±…

#### 7.1.1 ê¸°ë³¸ ë³´ì•ˆ ì„¤ì •

**ë³´ì•ˆ ê³„ì¸µ ì„¤ì •:**
| ê³„ì¸µ | ì„¤ì • | ìˆ˜ì¤€ | ì„¤ëª… |
|------|------|------|----------|
| ì „ì²´ ë³µì¡ë„ | Basic | ê¸°ë³¸ | ê°œë°œ í¸ì˜ì„± ìš°ì„  |
| ì¸ì¦ | JWT | ê¸°ë³¸ | ê°œë°œìš© ê³ ì • ì‹œí¬ë¦¿ |
| ì¸ì¦ ê²€ì¦ | API Gateway | ë‹¨ìˆœ | Gateway ë ˆë²¨ë§Œ ê²€ì¦ |
| ì¸ê°€ | Role-based | ê¸°ë³¸ | ë‹¨ìˆœí•œ ì—­í•  ê¸°ë°˜ |
| ë‚´ë¶€ ì•”í˜¸í™” | Disabled | ì—†ìŒ | ê°œë°œí™˜ê²½ ë‹¨ìˆœí™” |
| ì™¸ë¶€ ì•”í˜¸í™” | HTTPS | Ingress | Ingress ë ˆë²¨ HTTPSë§Œ |

#### 7.1.2 ì‹œí¬ë¦¿ ê´€ë¦¬

**ì‹œí¬ë¦¿ ê´€ë¦¬ ì „ëµ:**
| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| ê´€ë¦¬ ë°©ì‹ | Kubernetes Secrets | ê¸°ë³¸ K8s ì— ë‚´ì¥ëœ ë°©ì‹ |
| ìˆœí™˜ ì •ì±… | ìˆ˜ë™ | ê°œë°œí™˜ê²½ ë‹¨ìˆœ ê´€ë¦¬ |
| ì €ì¥ì†Œ | etcd | í´ëŸ¬ìŠ¤í„° ê¸°ë³¸ ì €ì¥ì†Œ |

**ê´€ë¦¬ ëŒ€ìƒ ì‹œí¬ë¦¿:**
| ì‹œí¬ë¦¿ ì´ë¦„ | ìš©ë„ | ìˆœí™˜ ì£¼ê¸° |
|-------------|------|----------|
| database_password | PostgreSQL ì ‘ê·¼ | ìˆ˜ë™ |
| redis_password | Redis ì ‘ê·¼ | ìˆ˜ë™ |
| jwt_secret | JWT í† í° ì„œëª… | ìˆ˜ë™ |
| openai_api_key | OpenAI API ì ‘ê·¼ | ìˆ˜ë™ |

### 7.2 Network Policies

#### 7.2.1 ê¸°ë³¸ ì •ì±…

**Network Policy ì„¤ì •:**
| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| Policy ì´ë¦„ | dev-basic-policy | ê°œë°œí™˜ê²½ ê¸°ë³¸ ì •ì±… |
| API ë²„ì „ | networking.k8s.io/v1 | Kubernetes Network Policy v1 |
| Pod ì„ íƒì | {} (ì „ì²´) | ëª¨ë“  Podì— ì ìš© |
| ì •ì±… ìœ í˜• | Ingress, Egress | ì¸ë°”ìš´ë“œ/ì•„ì›ƒë°”ìš´ë“œ ëª¨ë‘ ì œì–´ |
| Ingress ê·œì¹™ | {} (ì „ì²´ í—ˆìš©) | ê°œë°œí™˜ê²½ í¸ì˜ìƒ ëª¨ë“  ì¸ë°”ìš´ë“œ í—ˆìš© |
| Egress ê·œì¹™ | {} (ì „ì²´ í—ˆìš©) | ëª¨ë“  ì•„ì›ƒë°”ìš´ë“œ í—ˆìš© |

## 8. ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### 8.1 ê¸°ë³¸ ëª¨ë‹ˆí„°ë§

#### 8.1.1 Kubernetes ê¸°ë³¸ ëª¨ë‹ˆí„°ë§

**ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ:**
| êµ¬ì„±ìš”ì†Œ | ìƒíƒœ | ì„¤ëª… |
|-----------|------|----------|
| Metrics Server | Enabled | ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ |
| Kubernetes Dashboard | Enabled | ê°œë°œìš© ëŒ€ì‹œë³´ë“œ |

**ê¸°ë³¸ ì•Œë¦¼ ì„¤ì •:**
| ì•Œë¦¼ ìœ í˜• | ì„ê³„ê°’ | ì„¤ëª… |
|-----------|----------|----------|
| Pod Crash Loop | 5íšŒ ì´ìƒ | Pod ì¬ì‹œì‘ ë°˜ë³µ ê°ì§€ |
| Node Not Ready | 5ë¶„ ì´ìƒ | ë…¸ë“œ ë¹„ì •ìƒ ìƒíƒœ ê°ì§€ |
| High Memory Usage | 90% ì´ìƒ | ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê³¼ë‹¤ ê°ì§€ |

#### 8.1.2 ì• í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë‹ˆí„°ë§

**í—¬ìŠ¤ì²´í¬ ì„¤ì •:**
| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| Health Check Path | /actuator/health | Spring Boot Actuator ì—”ë“œí¬ì¸íŠ¸ |
| ì²´í¬ ì£¼ê¸° | 30ì´ˆ | ìƒíƒœ í™•ì¸ ê°„ê²© |
| íƒ€ì„ì•„ì›ƒ | 5ì´ˆ | ì‘ë‹µ ëŒ€ê¸° ì‹œê°„ |

**ìˆ˜ì§‘ ë©”íŠ¸ë¦­:**
| ë©”íŠ¸ë¦­ ìœ í˜• | ë„êµ¬ | ìš©ë„ |
|-----------|------|------|
| JVM Metrics | Micrometer | ìë°” ê°€ìƒë¨¸ì‹  ì„±ëŠ¥ |
| HTTP Request Metrics | Micrometer | API ìš”ì²­ í†µê³„ |
| Database Connection Pool | Micrometer | DB ì—°ê²° í’€ ìƒíƒœ |

### 8.2 ë¡œê¹…

#### 8.2.1 ë¡œê·¸ ìˆ˜ì§‘

**ë¡œê·¸ ìˆ˜ì§‘ ì„¤ì •:**
| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| ìˆ˜ì§‘ ë°©ì‹ | kubectl logs | Kubernetes ê¸°ë³¸ ë¡œê·¸ ëª…ë ¹ì–´ |
| ì €ì¥ ë°©ì‹ | ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œ | ë…¸ë“œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ |
| ë³´ì¡´ ê¸°ê°„ | 7ì¼ | ê°œë°œí™˜ê²½ ë‹¨ê¸° ë³´ì¡´ |

**ë¡œê·¸ ë ˆë²¨ ì„¤ì •:**
| ë¡œê±° ìœ í˜• | ë ˆë²¨ | ì„¤ëª… |
|-----------|------|----------|
| Root Logger | INFO | ì „ì²´ ì‹œìŠ¤í…œ ê¸°ë³¸ ë ˆë²¨ |
| Application Logger | DEBUG | ê°œë°œìš© ìƒì„¸ ë¡œê·¸ |
| Database Logger | WARN | ë°ì´í„°ë² ì´ìŠ¤ ì£¼ìš” ì´ë²¤íŠ¸ë§Œ |

## 9. CI/CD ë° ë°°í¬

### 9.1 ê°œë°œí™˜ê²½ CI/CD

#### 9.1.1 ë¹Œë“œ íŒŒì´í”„ë¼ì¸

**íŒŒì´í”„ë¼ì¸ ì„¤ì •:**
| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| íŠ¸ë¦¬ê±° | push to develop branch | develop ë¸Œëœì¹˜ í‘¸ì‹œ ì‹œ ìë™ ì‹¤í–‰ |

**ë¹Œë“œ ë‹¨ê³„:**
| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|----------|
| Unit Tests | ê¸°ë³¸ í…ŒìŠ¤íŠ¸ë§Œ | í•„ìˆ˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ |
| Build Image | Docker build | ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ë¹Œë“œ |
| Push Registry | ACR push | Azure Container Registry ì—…ë¡œë“œ |

**í’ˆì§ˆ ê²Œì´íŠ¸:**
| ê²Œì´íŠ¸ ìœ í˜• | ì„ê³„ê°’ | í•„ìˆ˜ ì—¬ë¶€ |
|-----------|----------|----------|
| Unit Test Coverage | 50% ì´ìƒ | ì„ íƒ |
| Build Success | ì„±ê³µ | í•„ìˆ˜ |

#### 9.1.2 ë°°í¬ ì „ëµ

**ë°°í¬ ë°©ì‹ ì„¤ì •:**
| ì„¤ì • í•­ëª© | ê°’ | ì„¤ëª… |
|-----------|----|---------|
| ë°°í¬ ë°©ì‹ | Rolling Update | ì ì§„ì  ì—…ë°ì´íŠ¸ |
| ìµœëŒ€ ë¹„ê°€ìš© | 1 | ë™ì‹œ ì—…ë°ì´íŠ¸ ê°€ëŠ¥ Pod ìˆ˜ |
| ìµœëŒ€ ì¶”ê°€ | 1 | ê¸°ì¡´ Pod ìˆ˜ ëŒ€ë¹„ ì¶”ê°€ ê°€ëŠ¥ ìˆ˜ |

**ìë™í™” ì„¤ì •:**
| ìë™í™” ìœ í˜• | ì„¤ì • | ì„¤ëª… |
|-----------|------|----------|
| ìë™ ë°°í¬ | develop ë¸Œëœì¹˜ | ì†ŒìŠ¤ ë³€ê²½ ì‹œ ìë™ ë°°í¬ |
| ë¡¤ë°± | ìˆ˜ë™ | ìˆ˜ë™ ë¡¤ë°± ì‘ì—… |
| í—¬ìŠ¤ì²´í¬ | ê¸°ë³¸ | ê¸°ë³¸ liveness/readiness ì²´í¬ |

### 9.2 ê°œë°œ ì›Œí¬í”Œë¡œìš°

#### 9.2.1 ì¼ìƒ ê°œë°œ í”„ë¡œì„¸ìŠ¤
```bash
# 1. ì½”ë“œ ë³€ê²½
git push origin feature/new-feature

# 2. ìë™ ë¹Œë“œ ë° ë°°í¬
# GitHub Actionsê°€ ìë™ ì‹¤í–‰

# 3. ê°œë°œí™˜ê²½ í™•ì¸
kubectl get pods
curl http://dev-tripgen.local/api/health

# 4. ë¡œê·¸ í™•ì¸
kubectl logs -f deployment/trip-service
```

## 10. ë¹„ìš© ìµœì í™”

### 10.1 ê°œë°œí™˜ê²½ ë¹„ìš© êµ¬ì¡°

#### 10.1.1 ì£¼ìš” ë¹„ìš© ìš”ì†Œ
| êµ¬ì„±ìš”ì†Œ | ì‚¬ì–‘ | ì›”ê°„ ì˜ˆìƒ ë¹„ìš© (USD) | ì ˆì•½ ë°©ì•ˆ |
|----------|------|---------------------|-----------|
| AKS ë…¸ë“œ | Standard_B2s Ã— 2 | $120 | Spot Instance |
| PostgreSQL | Pod ê¸°ë°˜ | $0 | ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ |
| Redis | Pod ê¸°ë°˜ | $0 | ë©”ëª¨ë¦¬ ì „ìš© |
| Service Bus | Basic | $10 | ìµœì†Œ êµ¬ì„± |
| Load Balancer | Basic | $20 | ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ |
| **ì´í•©** | | **$150** | |

#### 10.1.2 ë¹„ìš© ì ˆì•½ ì „ëµ

**ì»´í“¨íŒ… ë¹„ìš© ì ˆì•½:**
| ì ˆì•½ ë°©ì•ˆ | ì ˆì•½ë¥  | ì„¤ëª… |
|-----------|----------|----------|
| Spot Instances ì‚¬ìš© | 70% | ì˜ˆë¹„ ì¸ìŠ¤í„´ìŠ¤ í™œìš© |
| ë¹„ì—…ë¬´ì‹œê°„ ìë™ ì¢…ë£Œ | ë°˜ì  | ìŠ¤ì¼€ì¤„ë§ ê¸°ë°˜ ì¢…ë£Œ |
| ë¦¬ì†ŒìŠ¤ ìµœì í™” | 20-30% | requests/limits ì •ë°€ ì„¤ì • |

**ìŠ¤í† ë¦¬ì§€ ë¹„ìš© ì ˆì•½:**
| ì ˆì•½ ë°©ì•ˆ | ì ˆì•½ë¥  | ì„¤ëª… |
|-----------|----------|----------|
| hostPath ì‚¬ìš© | 100% | Managed Disk ëŒ€ë¹„ ì™„ì „ ì ˆì•½ |
| emptyDir í™œìš© | 100% | ì„ì‹œ ë°ì´í„° ì§€ì—­ ì €ì¥ì†Œ |

**ë„¤íŠ¸ì›Œí‚¹ ë¹„ìš© ì ˆì•½:**
| ì ˆì•½ ë°©ì•ˆ | ì ˆì•½ë¥  | ì„¤ëª… |
|-----------|----------|----------|
| ë‹¨ì¼ Load Balancer | 50% | í•˜ë‚˜ì˜ ë¡œë“œë°¸ëŸ°ì„œë¡œ ë‹¤ì¤‘ ì„œë¹„ìŠ¤ |
| ClusterIP í™œìš© | 100% | ë‚´ë¶€ í†µì‹  ë¹„ìš© ì—†ìŒ |

## 11. ê°œë°œí™˜ê²½ ìš´ì˜ ê°€ì´ë“œ

### 11.1 ì¼ìƒ ìš´ì˜

#### 11.1.1 í™˜ê²½ ì‹œì‘/ì¢…ë£Œ
```bash
# í™˜ê²½ ì‹œì‘
kubectl scale deployment --replicas=1 --all

# í™˜ê²½ ì¢…ë£Œ (ì•¼ê°„/ì£¼ë§)
kubectl scale deployment --replicas=0 --all
# PostgreSQLì€ ìœ ì§€ (ë°ì´í„° ë³´ì¡´)
```

#### 11.1.2 ë°ì´í„° ê´€ë¦¬
```bash
# í…ŒìŠ¤íŠ¸ ë°ì´í„° ì´ˆê¸°í™”
kubectl apply -f k8s/data-init/

# ê°œë°œ ë°ì´í„° ë°±ì—…
kubectl exec postgresql-0 -- pg_dump tripgen > backup.sql

# ë°ì´í„° ë³µì›
kubectl exec -i postgresql-0 -- psql tripgen < backup.sql
```

### 11.2 íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

#### 11.2.1 ì¼ë°˜ì ì¸ ë¬¸ì œ í•´ê²°

| ë¬¸ì œ ìœ í˜• | ì›ì¸ | í•´ê²°ë°©ì•ˆ | ì˜ˆë°©ë²• |
|-----------|------|----------|----------|
| Pod Pending | ë¦¬ì†ŒìŠ¤ ë¶€ì¡± | ë…¸ë“œ ìŠ¤ì¼€ì¼ ì—… ë˜ëŠ” ë¦¬ì†ŒìŠ¤ ì¡°ì • | ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§ ê°•í™” |
| Database Connection Failed | PostgreSQL Pod ì¬ì‹œì‘ | Pod ìƒíƒœ í™•ì¸ ë° ì¬ì‹œì‘ | Health Check ê°•í™” |
| Out of Memory | ë©”ëª¨ë¦¬ í•œê³„ ì´ˆê³¼ | limits ì¡°ì • ë˜ëŠ” ë¶ˆí•„ìš”í•œ Pod ì¢…ë£Œ | ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§ |

## 12. ìš´ì˜í™˜ê²½ ì „í™˜ ì¤€ë¹„

### 12.1 ìš´ì˜í™˜ê²½ ì°¨ì´ì 

#### 12.1.1 ì£¼ìš” ì°¨ì´ì‚¬í•­
| êµ¬ì„±ìš”ì†Œ | ê°œë°œí™˜ê²½ | ìš´ì˜í™˜ê²½ |
|----------|----------|----------|
| ê°€ìš©ì„± | 95% | 99.9% |
| ë°±ì—… | ìˆ˜ë™ | ìë™ (ì¼ì¼) |
| ë³´ì•ˆ | ê¸°ë³¸ | ì—”í„°í”„ë¼ì´ì¦ˆ |
| ëª¨ë‹ˆí„°ë§ | ê¸°ë³¸ | ê³ ê¸‰ (APM) |
| ìŠ¤í† ë¦¬ì§€ | hostPath | Azure Managed |

#### 12.1.2 ì „í™˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

**ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜:**
| ì²´í¬ í•­ëª© | ìƒíƒœ | ìš°ì„ ìˆœìœ„ | ë¹„ê³  |
|-----------|------|----------|------|
| ê°œë°œ ë°ì´í„° ë°±ì—… | â˜ | ë†’ìŒ | pg_dump ì‚¬ìš© |
| ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì¤€ë¹„ | â˜ | ë†’ìŒ | Flyway/Liquibase ê³ ë ¤ |
| í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬ | â˜ | ì¤‘ê°„ | ìš´ì˜ ë°ì´í„°ì™€ ë¶„ë¦¬ |

**ì„¤ì • ë³€ê²½:**
| ì²´í¬ í•­ëª© | ìƒíƒœ | ìš°ì„ ìˆœìœ„ | ë¹„ê³  |
|-----------|------|----------|------|
| í™˜ê²½ ë³€ìˆ˜ ë¶„ë¦¬ | â˜ | ë†’ìŒ | ConfigMap/Secret ë¶„ë¦¬ |
| ì‹œí¬ë¦¿ ê´€ë¦¬ ë°©ì‹ ë³€ê²½ | â˜ | ë†’ìŒ | Azure Key Vault ì „í™˜ |
| ë„¤íŠ¸ì›Œí¬ ì •ì±… ê°•í™” | â˜ | ì¤‘ê°„ | Private Endpoint ì„¤ì • |

**ëª¨ë‹ˆí„°ë§ ì„¤ì •:**
| ì²´í¬ í•­ëª© | ìƒíƒœ | ìš°ì„ ìˆœìœ„ | ë¹„ê³  |
|-----------|------|----------|------|
| ë¡œê·¸ ìˆ˜ì§‘ ë°©ì‹ ë³€ê²½ | â˜ | ì¤‘ê°„ | Azure Monitor ì—°ë™ |
| ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ì„¤ì • | â˜ | ì¤‘ê°„ | Application Insights |
| ì•Œë¦¼ ì •ì±… ìˆ˜ë¦½ | â˜ | ë‚®ìŒ | PagerDuty/Teams ì—°ë™ |

## 13. ê²°ë¡ 

### 13.1 ê°œë°œí™˜ê²½ í•µì‹¬ ê°€ì¹˜
1. **ë¹ ë¥¸ ê°œë°œ**: ë³µì¡í•œ ì„¤ì • ìµœì†Œí™”ë¡œ ê°œë°œ ì†ë„ í–¥ìƒ
2. **ë¹„ìš© íš¨ìœ¨**: Spot Instanceì™€ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¡œ ë¹„ìš© ìµœì†Œí™”
3. **ë‹¨ìˆœì„±**: ìš´ì˜ ë³µì¡ë„ ìµœì†Œí™”ë¡œ ê°œë°œ ì§‘ì¤‘
4. **ì‹¤í—˜ì„±**: ìƒˆë¡œìš´ ê¸°ëŠ¥ ë¹ ë¥¸ ê²€ì¦ ê°€ëŠ¥

### 13.2 ê°œë°œí™˜ê²½ ì œì•½ì‚¬í•­
- **ê°€ìš©ì„±**: 95% (Spot Instance ì‚¬ìš©ìœ¼ë¡œ ì¸í•œ ë¶ˆì•ˆì •ì„±)
- **í™•ì¥ì„±**: ì œí•œì  (ê³ ì • ë¦¬ì†ŒìŠ¤)
- **ë³´ì•ˆ**: ê¸°ë³¸ ìˆ˜ì¤€ (ìš´ì˜ ëŒ€ë¹„ ë‹¨ìˆœí™”)
- **ë°±ì—…**: ìˆ˜ë™ ê´€ë¦¬ í•„ìš”

ì´ ê°œë°œí™˜ê²½ì€ **ë¹ ë¥¸ MVP ê°œë°œê³¼ ê²€ì¦**ì— ìµœì í™”ë˜ì–´ ìˆìœ¼ë©°, ìš´ì˜í™˜ê²½ìœ¼ë¡œì˜ ì ì§„ì  ì „í™˜ì„ ì§€ì›í•©ë‹ˆë‹¤.